<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" >
    <meta charset="utf-8">
    <title>
      jQuery Fundamentals
    </title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    <div title="jQuery Fundamentals" class="book">

      <div id="titlepage">
        <div>
          <div>
            <h1 class="title">
              jQuery Fundamentals
            </h1>
          </div>
          <div>
            <div class="author">
              <h3 class="author">
                By <a href="http://www.rebeccamurphey.com" class="ulink">Rebecca Murphey</a>
              </h3>
            </div>
          </div>
          <div>
            <div class="othercredit">
              <h3 class="othercredit">
                <span class="orgname"><a href="http://github.com/rmurphey/jqfundamentals" class="ulink">http://github.com/rmurphey/jqfundamentals</a></span>
              </h3>
            </div>
          </div>
          <div>
            <div class="othercredit">
              <h3 class="othercredit">
                <span class="orgname">With contributions by James Padolsey, Paul Irish, and others. See the GitHub repository for a complete history of contributions.</span>
              </h3>
            </div>
          </div>
          <div>
            <p class="copyright">
              Copyright © 2011
            </p>
          </div>
          <div>
            <div title="Legal Notice" class="legalnotice">
              <p>
                Licensed by Rebecca Murphey under the <a href="http://creativecommons.org/licenses/by-sa/3.0/us/" class="ulink">Creative Commons Attribution-Share Alike 3.0 United States license</a>. You are free to copy, distribute, transmit, and remix this work, provided you attribute the work to Rebecca Murphey as the original author and reference <a href="http://github.com/rmurphey/jqfundamentals" class="ulink">the GitHub repository for the work</a>. If you alter, transform, or build upon this work, you may distribute the resulting work only under the same, similar or a compatible license. Any of the above conditions can be waived if you get permission from the copyright holder. For any reuse or distribution, you must make clear to others the license terms of this work. The best way to do this is with <a href="http://creativecommons.org/licenses/by-sa/3.0/us/" class="ulink">a link to the license</a>.
              </p>
            </div>
          </div>
        </div>
      </div> <!-- end titlepage -->

      <div id="toc">
        <h2>Contents</h2>
        <ul>
        <!-- JS-generated TOC goes here -->
        </ul>
      </div>

      <div id="loe">
        <h2>List of Examples</h2>
        <ul>
        <!-- JS-generated list of examples goes here -->
        </ul>
      </div>

      <div title="Welcome" class="chapter">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title">
                Welcome
              </h2>
            </div>
          </div>
        </div>
        <p>
          jQuery is fast becoming a must-have skill for front-end developers. The purpose of this book is to provide an overview of the jQuery JavaScript library; when you're done with the book, you should be able to complete basic tasks using jQuery, and have a solid basis from which to continue your learning. This book was designed as material to be used in a classroom setting, but you may find it useful for individual study.
        </p>
        <p>
          This is a hands-on class. We will spend a bit of time covering a concept, and then you’ll have the chance to work on an exercise related to the concept. Some of the exercises may seem trivial; others may be downright daunting. In either case, there is no grade; the goal is simply to get you comfortable working your way through problems you’ll commonly be called upon to solve using jQuery. Example solutions to all of the exercises are included in the sample code.
        </p>
        <div title="Getting the Code" class="section">
          <h2 class="title">
            Getting the Code
          </h2>
          <p>
            The code we’ll be using in this book is hosted <a href="http://github.com/rmurphey/jqfundamentals" class="ulink">in a repository on Github</a>. You can download a .zip or .tar file of the code, then uncompress it to use it on your server. If you’re git-inclined, you’re welcome to clone or fork the repository.
          </p>
        </div>
        <div title="Software" class="section">
          <h2 class="title">
            Software
          </h2>
          <p>
            You'll want to have the following tools to make the most of the class:
          </p>
          <ul>
            <li>
              <p>
                The Firefox browser
              </p>
            </li>
            <li>
              <p>
                The Firebug extension for Firefox
              </p>
            </li>
            <li>
              <p>
                A plain text editor
              </p>
            </li>
            <li>
              <p>
                For the Ajax portions: A local server (such as MAMP or WAMP), or an FTP or SSH client to access a remote server.
              </p>
            </li>
          </ul>
        </div>
        <div title="Adding JavaScript to Your Page" class="section">
          <h2 class="title">
            Adding JavaScript to Your Page
          </h2>
          <p>
            JavaScript can be included inline or by including an external file via a script tag. The order in which you include JavaScript is important: dependencies must be included before the script that depends on them.
          </p>
          <p>
            For the sake of page performance, JavaScript should be included as close to the end of your HTML as is practical. Multiple JavaScript files should be combined for production use.
          </p>
          <div class="example">
            <p class="title">
              <b>An example of inline Javascript</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
&lt;script&gt;
console.log('hello');
&lt;/script&gt;
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>An example of including external JavaScript</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
&lt;script src='/js/jquery.js'&gt;&lt;/script&gt;
</pre>
            </div>
          </div>
        </div>
        <div title="JavaScript Debugging" class="section">
          <h2 class="title">
            JavaScript Debugging
          </h2>
          <p>
            A debugging tool is essential for JavaScript development. Firefox provides a debugger via the Firebug extension; Safari and Chrome provide built-in consoles.
          </p>
          <p>
            Each console offers:
          </p>
          <ul>
            <li>
              <p>
                single- and multi-line editors for experimenting with JavaScript
              </p>
            </li>
            <li>
              <p>
                an inspector for looking at the generated source of your page
              </p>
            </li>
            <li>
              <p>
                a Network or Resources view, to examine network requests
              </p>
            </li>
          </ul>
          <p>
            When you are writing JavaScript code, you can use the following methods to send messages to the console:
          </p>
          <ul>
            <li>
              <code class="code">console.log()</code> for sending general log messages
            </li>
            <li>
              <code class="code">console.dir()</code> for logging a browseable object
            </li>
            <li>
              <code class="code">console.warn()</code> for logging warnings
            </li>
            <li>
              <code class="code">console.error()</code> for logging error messages
            </li>
          </ul>
          <p>
            Other console methods are also available, though they may differ from one browser to another. The consoles also provide the ability to set break points and watch expressions in your code for debugging purposes.
          </p>
        </div>
        <div title="Exercises" class="section">
          <h2 class="title">
            Exercises
          </h2>
          <p>
            Most chapters in the book conclude with one or more exercises. For some exercises, you’ll be able to work directly in Firebug; for others, you will need to include other scripts after the jQuery script tag as directed in the individual exercises.
          </p>
          <p>
            In some cases, you will need to consult the jQuery documentation in order to complete an exercise, as we won’t have covered all of the relevant information in the book. This is by design; the jQuery library is large, and learning to find answers in the documentation is an important part of the process.
          </p>
          <p>
            Here are a few suggestions for tackling these problems:
          </p>
          <ul>
            <li>
              <p>
                First, make sure you thoroughly understand the problem you're being asked to solve.
              </p>
            </li>
            <li>
              <p>
                Next, figure out which elements you'll need to access in order to solve the problem, and determine how you'll get those elements. Use Firebug to verify that you're getting the elements you're after.
              </p>
            </li>
            <li>
              <p>
                Finally, figure out what you need to do with the elements to solve the problem. It can be helpful to write comments explaining what you're going to do before you try to write the code to do it.
              </p>
            </li>
          </ul>
          <p>
            Do not be afraid to make mistakes! Do not try to make your code perfect on the first try! Making mistakes and experimenting with solutions is part of learning the library, and you’ll be a better developer for it. Examples of solutions for these exercises are located in the <code class="filename">/solutions</code> directory in the sample code.
          </p>
        </div>
        <h2 class="title">
          Conventions used in this book
        </h2>
        <p>
          Methods that can be called on jQuery objects will be referred to as <code class="code">$.fn.methodName</code>. Methods that exist in the jQuery namespace but that cannot be called on jQuery objects will be referred to as <code class="code">$.methodName</code>. If this doesn't mean much to you, don't worry — it should become clearer as you progress through the book.
        </p>
        <div class="example">
          <p class="title">
            <b>Example of an example</b>
          </p>
          <div class="example-contents">
            <pre class="programlisting">
// code examples will appear like this
</pre>
          </div>
        </div>
        <p class="remark">
          <i><span class="remark">Remarks will appear like this.</span></i>
        </p>
        <div class="note">
        <h3 class="title">
          Note
        </h3>
        <p>
          Notes about a topic will appear like this.
        </p>
        </div>
        <div title="Reference Material" class="section">
          <h2 class="title">
            Reference Material
          </h2>
          <p>
            There are any number of articles and blog posts out there that address some aspect of jQuery. Some are phenomenal; some are downright wrong. When you read an article about jQuery, be sure it's talking about the same version as you're using, and resist the urge to just copy and paste — take the time to understand the code in the article.
          </p>
          <p>
            Here are some excellent resources to use during your jQuery learning. The most important of all is the jQuery source itself: it contains, in code form, complete documentation of the library. It is not a black box — your understanding of the library will grow exponentially if you spend some time visiting it now and again —&nbsp;and I highly recommend bookmarking it in your browser and referring to it often.
          </p>
          <ul>
            <li>
              <p>
                <a href="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js" class="ulink">The jQuery source</a>
              </p>
            </li>
            <li>
              <p>
                <a href="http://api.jquery.com" class="ulink">jQuery documentation</a>
              </p>
            </li>
            <li>
              <p>
                <a href="http://forum.jquery.com/" class="ulink">jQuery forum</a>
              </p>
            </li>
            <li>
              <p>
                <a href="http://delicious.com/rdmey/jquery-class" class="ulink">Delicious bookmarks</a>
              </p>
            </li>
            <li>
              <p>
                <a href="http://docs.jquery.com/Discussion#Chat_.2F_IRC_Channel" class="ulink">#jquery IRC channel on Freenode</a>
              </p>
            </li>
          </ul>
        </div>
      </div>
      <div title="Part&nbsp;I.&nbsp;JavaScript 101" class="part">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                Part&nbsp;I.&nbsp;JavaScript 101
              </h1>
            </div>
          </div>
        </div>
        <div title="JavaScript Basics" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  JavaScript Basics
                </h2>
              </div>
            </div>
          </div>
          <div title="Overview" class="section">
            <h2 class="title">
              Overview
            </h2>
            <p>
              jQuery is built on top of JavaScript, a rich and expressive language in its own right. This section covers the basic concepts of JavaScript, as well as some frequent pitfalls for people who have not used JavaScript before. While it will be of particular value to people with no programming experience, even people who have used other programming languages may benefit from learning about some of the peculiarities of JavaScript.
            </p>
            <p>
              If you’re interested in learning more about the JavaScript language, I highly recommend <em class="citetitle">JavaScript: The Good Parts</em> by Douglas Crockford.
            </p>
          </div>
          <div title="Syntax Basics" class="section">
            <h2 class="title">
              Syntax Basics
            </h2>
            <p>
              Understanding statements, variable naming, whitespace, and other basic JavaScript syntax.
            </p>
            <div class="example">
              <p class="title">
                <b>A simple variable declaration</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = 'hello world';
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Whitespace has no meaning outside of quotation marks</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo =         'hello world';
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Parentheses indicate precedence</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
2 * 3 + 5;    // returns 11; multiplication happens first
2 * (3 + 5);  // returns 16; addition happens first
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Tabs enhance readability, but have no special meaning</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = function() {
    console.log('hello');
};
</pre>
              </div>
            </div>
          </div>
          <div title="Operators" class="section">
            <h2 class="title">
              Operators
            </h2>
            <div title="Basic Operators" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Basic Operators
                </h3>
              </div>
              <p>
                Basic operators allow you to manipulate values.
              </p>
              <div class="example">
                <p class="title">
                  <b>Concatenation</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var foo = 'hello';
var bar = 'world';

console.log(foo + ' ' + bar); // 'hello world'
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Multiplication and division</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
2 * 3;
2 / 3;
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Incrementing and decrementing</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var i = 1;

var j = ++i;  // pre-increment:  j equals 2; i equals 2
var k = i++;  // post-increment: k equals 2; i equals 3
</pre>
                </div>
              </div>
            </div>
            <div title="Operations on Numbers &amp; Strings" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Operations on Numbers &amp; Strings
                </h3>
              </div>
              <p>
                In JavaScript, numbers and strings will occasionally behave in ways you might not expect.
              </p>
              <div class="example">
                <p class="title">
                  <b>Addition vs. concatenation</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var foo = 1;
var bar = '2';

console.log(foo + bar);  // 12. uh oh
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Forcing a string to act as a number</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var foo = 1;
var bar = '2';

// coerce the string to a number
console.log(foo + Number(bar));
</pre>
                </div>
              </div>
              <p>
                The Number constructor, when called as a function (like above) will have the effect of casting its argument into a number. You could also use the unary plus operator, which does the same thing:
              </p>
              <div class="example">
                <p class="title">
                  <b>Forcing a string to act as a number (using the unary-plus operator)</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
console.log(foo + +bar);
</pre>
                </div>
              </div>
            </div>
            <div class="titlepage">
              <h3 class="title">
                Logical Operators
              </h3>
            </div>
            <p>
              Logical operators allow you to evaluate a series of operands using AND and OR operations.
            </p>
            <div class="example">
              <p class="title">
                <b>Logical AND and OR operators</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = 1;
var bar = 0;
var baz = 2;

foo || bar;   // returns 1, which is true
bar || foo;   // returns 1, which is true

foo &amp;&amp; bar;   // returns 0, which is false
foo &amp;&amp; baz;   // returns 2, which is true
baz &amp;&amp; foo;   // returns 1, which is true
</pre>
              </div>
            </div>
            <p>
              Though it may not be clear from the example, the <code class="code">||</code> operator returns the value of the first truthy operand, or, in cases where neither operand is truthy, it'll return the last of both operands. The <code class="code">&amp;&amp;</code> operator returns the value of the first false operand, or the value of the last operand if both operands are truthy.
            </p>
            <p>
              Be sure to consult <a title="Truthy and Falsy Things" href="#javascript-basics.sections.truthy-falsy" class="xref">the section called “Truthy and Falsy Things”</a> for more details on which values evaluate to <code class="code">true</code> and which evaluate to <code class="code">false</code>.
            </p>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              You'll sometimes see developers use these logical operators for flow control instead of using <code class="code">if</code> statements. For example:
            </p>
            <pre class="programlisting">
// do something with foo if foo is truthy
foo &amp;&amp; doSomething(foo);

// set bar to baz if baz is truthy;
// otherwise, set it to the return
// value of createBar()
var bar = baz || createBar();
</pre>
            <p>
              This style is quite elegant and pleasantly terse; that said, it can be really hard to read, especially for beginners. I bring it up here so you'll recognize it in code you read, but I don't recommend using it until you're extremely comfortable with what it means and how you can expect it to behave.
            </p>
            </div>
            <div title="Comparison Operators" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Comparison Operators
                </h3>
              </div>
              <p>
                Comparison operators allow you to test whether values are equivalent or whether values are identical.
              </p>
              <div class="example">
                <p class="title">
                  <b>Comparison operators</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var foo = 1;
var bar = 0;
var baz = '1';
var bim = 2;

foo == bar;   // returns false
foo != bar;   // returns true
foo == baz;   <span class="bold"><strong>// returns true; careful!</strong></span>

foo === baz;             // returns false
foo !== baz;             // returns true
foo === parseInt(baz);   // returns true

foo &gt; bim;    // returns false
bim &gt; baz;    // returns true
foo &lt;= baz;   // returns true
</pre>
                </div>
              </div>
            </div>
          </div>
          <h2 class="title">
            Conditional Code
          </h2>
          <p>
            Sometimes you only want to run a block of code under certain conditions. Flow control — via <code class="code">if</code> and <code class="code">else</code> blocks —&nbsp;lets you run code only under certain conditions.
          </p>
          <div class="example">
            <p class="title">
              <b>Flow control</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var foo = true;
var bar = false;

if (bar) {
    // this code will never run
    console.log('hello!');
}

if (bar) {
    // this code won't run
} else {
    if (foo) {
        // this code will run
    } else {
        // this code would run if foo and bar were both false
    }
}
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            While curly braces aren't strictly required around single-line <code class="code">if</code> statements, using them consistently, even when they aren't strictly required, makes for vastly more readable code.
          </p>
          <p>
            Be mindful not to define functions with the same name multiple times within separate <code class="code">if</code>/<code class="code">else</code> blocks, as doing so may not have the expected result.
          </p>
          </div>

          <div title="Truthy and Falsy Things" class="section">
            <div class="titlepage">
              <h3 class="title">
                Truthy and Falsy Things
              </h3>
            </div>
            <p>
              In order to use flow control successfully, it's important to understand which kinds of values are "truthy" and which kinds of values are "falsy." Sometimes, values that seem like they should evaluate one way actually evaluate another.
            </p>
            <div class="example">
              <p class="title">
                <b>Values that evaluate to <code class="code">true</code></b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
'0';
'any string';
[];  // an empty array
{};  // an empty object
1;   // any non-zero number
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Values that evaluate to <code class="code">false</code></b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
0;
'';  // an empty string
NaN; // JavaScript's "not-a-number" variable
null;
undefined;  // be careful -- undefined can be redefined!
</pre>
              </div>
            </div>
          </div>
          <div title="Conditional Variable Assignment with The Ternary Operator" class="section">
            <div class="titlepage">
              <h3 class="title">
                Conditional Variable Assignment with The Ternary Operator
              </h3>
            </div>
            <p>
              Sometimes you want to set a variable to a value depending on some condition. You could use an <code class="code">if</code>/<code class="code">else</code> statement, but in many cases the ternary operator is more convenient. <span class="termdef">[Definition: The <em class="firstterm">ternary operator</em> tests a condition; if the condition is true, it returns a certain value, otherwise it returns a different value.]</span>
            </p>
            <div class="example">
              <p class="title">
                <b>The ternary operator</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
// set foo to 1 if bar is true;
// otherwise, set foo to 0
var foo = bar ? 1 : 0;
</pre>
              </div>
            </div>
            <p>
              While the ternary operator can be used without assigning the return value to a variable, this is generally discouraged.
            </p>
          </div>
          <div title="Switch Statements" class="section">
            <div class="titlepage">
              <h3 class="title">
                Switch Statements
              </h3>
            </div>
            <p>
              Rather than using a series of if/else if/else blocks, sometimes it can be useful to use a switch statement instead. <span class="termdef">[Definition: <em class="firstterm">Switch statements</em> look at the value of a variable or expression, and run different blocks of code depending on the value.]</span>
            </p>
            <div class="example">
              <p class="title">
                <b>A switch statement</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
switch (foo) {

    case 'bar':
        alert('the value was bar -- yay!');
    break;

    case 'baz':
        alert('boo baz :(');
    break;

    default:
        alert('everything else is just ok');
    break;

}
</pre>
              </div>
            </div>
            <p>
              Switch statements have somewhat fallen out of favor in JavaScript, because often the same behavior can be accomplished by creating an object that has more potential for reuse, testing, etc. For example:
            </p>
            <pre class="programlisting">
var stuffToDo = {
    'bar' : function() {
        alert('the value was bar -- yay!');
    },

    'baz' : function() {
        alert('boo baz :(');
    },

    'default' : function() {
        alert('everything else is just ok');
    }
};

if (stuffToDo[foo]) {
    stuffToDo[foo]();
} else {
    stuffToDo['default']();
}
</pre>
            <p>
              We'll look at objects in greater depth later in this chapter.
            </p>
          </div>
          <div title="Loops" class="section">
            <h2 class="title">
              Loops
            </h2>
            <p>
              Loops let you run a block of code a certain number of times.
            </p>
            <div class="example">
              <p class="title">
                <b>Loops</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
// logs 'try 0', 'try 1', ..., 'try 4'
for (var i=0; i&lt;5; i++) {
    console.log('try ' + i);
}
</pre>
              </div>
            </div>
            <p>
              <em><span class="remark">Note that in</span></em> <em>Loops even though we use the keyword <span class="token">var</span> before the variable name <code class="varname">i</code>, this does not "scope" the variable <code class="varname">i</code> to the loop block. We'll discuss scope in depth later in this chapter.</em>
            </p>
            <div title="The for loop" class="section">
              <div class="titlepage">
                <h3 class="title">
                  The for loop
                </h3>
              </div>
              <p>
                A <code class="code">for</code> loop is made up of four statements and has the following structure:
              </p>
              <pre class="programlisting">
for ([initialisation]; [conditional]; [iteration])
 [loopBody]
</pre>
              <p>
                The <span class="emphasis"><em>initialisation</em></span> statement is executed only once, before the loop starts. It gives you an opportunity to prepare or declare any variables.
              </p>
              <p>
                The <span class="emphasis"><em>conditional</em></span> statement is executed before each iteration, and its return value decides whether or not the loop is to continue. If the conditional statement evaluates to a falsey value then the loop stops.
              </p>
              <p>
                The <span class="emphasis"><em>iteration</em></span> statement is executed at the end of each iteration and gives you an opportunity to change the state of important variables. Typically, this will involve incrementing or decrementing a counter and thus bringing the loop ever closer to its end.
              </p>
              <p>
                The <span class="emphasis"><em>loopBody</em></span> statement is what runs on every iteration. It can contain anything you want. You'll typically have multiple statements that need to be executed and so will wrap them in a block ( <code class="code">{...}</code>).
              </p>
              <p>
                Here's a typical <code class="code">for</code> loop:
              </p>
              <div class="example">
                <p class="title">
                  <b>A typical <code class="code">for</code> loop</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
for (var i = 0, limit = 100; i &lt; limit; i++) {
    // This block will be executed 100 times
    console.log('Currently at ' + i);
    // Note: the last log will be "Currently at 99"
}
</pre>
                </div>
              </div>
            </div>
            <div title="The while loop" class="section">
              <div class="titlepage">
                <h3 class="title">
                  The while loop
                </h3>
              </div>
              <p>
                A <code class="code">while</code> loop is similar to an <code class="code">if</code> statement, except that its body will keep executing until the condition evaluates to false.
              </p>
              <pre class="programlisting">
while ([conditional]) [loopBody]
</pre>
              <p>
                Here's a typical <code class="code">while</code> loop:
              </p>
              <div class="example">
                <p class="title">
                  <b>A typical <code class="code">while</code> loop</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var i = 0;
while (i &lt; 100) {

    // This block will be executed 100 times
    console.log('Currently at ' + i);

    i++; // increment i

}
</pre>
                </div>
              </div>
              <p>
                You'll notice that we're having to increment the counter within the loop's body. It is possible to combine the conditional and incrementer, like so:
              </p>
              <div class="example">
                <p class="title">
                  <b>A <code class="code">while</code> loop with a combined conditional and incrementer</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var i = -1;
while (++i &lt; 100) {
    // This block will be executed 100 times
    console.log('Currently at ' + i);
}
</pre>
                </div>
              </div>
              <p>
                Notice that we're starting at <code class="code">-1</code> and using the prefix incrementer (<code class="code">++i</code>).
              </p>
            </div>
            <div title="The do-while loop" class="section">
              <div class="titlepage">
                <h3 class="title">
                  The do-while loop
                </h3>
              </div>
              <p>
                This is almost exactly the same as the <code class="code">while</code> loop, except for the fact that the loop's body is executed at least once before the condition is tested.
              </p>
              <pre class="programlisting">
do [loopBody] while ([conditional])
</pre>
              <p>
                Here's a <code class="code">do-while</code> loop:
              </p>
              <div class="example">
                <p class="title">
                  <b>A <code class="code">do-while</code> loop</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
do {

    // Even though the condition evaluates to false
    // this loop's body will still execute once.

    alert('Hi there!');

} while (false);
</pre>
                </div>
              </div>
              <p>
                These types of loops are quite rare since only few situations require a loop that blindly executes at least once. Regardless, it's good to be aware of it.
              </p>
            </div>
            <div title="Breaking and continuing" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Breaking and continuing
                </h3>
              </div>
              <p>
                Usually, a loop's termination will result from the conditional statement not evaluating to true, but it is possible to stop a loop in its tracks from within the loop's body with the <code class="code">break</code> statement.
              </p>
              <div class="example">
                <p class="title">
                  <b>Stopping a loop</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
for (var i = 0; i &lt; 10; i++) {
    if (something) {
        break;
    }
}
</pre>
                </div>
              </div>
              <p>
                You may also want to continue the loop without executing more of the loop's body. This is done using the <code class="code">continue</code> statement.
              </p>
              <div class="example">
                <p class="title">
                  <b>Skipping to the next iteration of a loop</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
for (var i = 0; i &lt; 10; i++) {

    if (something) {
        continue;
    }

    // The following statement will only be executed
    // if the conditional 'something' has not been met
    console.log('I have been reached');

}
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Reserved Words" class="section">
            <h2 class="title">
              Reserved Words
            </h2>
            <p>
              JavaScript has a number of “reserved words,” or words that have special meaning in the language. You should avoid using these words in your code except when using them with their intended meaning.
            </p>
            <ul>
              <li>
                <code class="code">break</code>
              </li>
              <li>
                <code class="code">case</code>
              </li>
              <li>
                <code class="code">catch</code>
              </li>
              <li>
                <code class="code">continue</code>
              </li>
              <li>
                <code class="code">default</code>
              </li>
              <li>
                <code class="code">delete</code>
              </li>
              <li>
                <code class="code">do</code>
              </li>
              <li>
                <code class="code">else</code>
              </li>
              <li>
                <code class="code">finally</code>
              </li>
              <li>
                <code class="code">for</code>
              </li>
              <li>
                <code class="code">function</code>
              </li>
              <li>
                <code class="code">if</code>
              </li>
              <li>
                <code class="code">in</code>
              </li>
              <li>
                <code class="code">instanceof</code>
              </li>
              <li>
                <code class="code">new</code>
              </li>
              <li>
                <code class="code">return</code>
              </li>
              <li>
                <code class="code">switch</code>
              </li>
              <li>
                <code class="code">this</code>
              </li>
              <li>
                <code class="code">throw</code>
              </li>
              <li>
                <code class="code">try</code>
              </li>
              <li>
                <code class="code">typeof</code>
              </li>
              <li>
                <code class="code">var</code>
              </li>
              <li>
                <code class="code">void</code>
              </li>
              <li>
                <code class="code">while</code>
              </li>
              <li>
                <code class="code">with</code>
              </li>
              <li>
                <code class="code">abstract</code>
              </li>
              <li>
                <code class="code">boolean</code>
              </li>
              <li>
                <code class="code">byte</code>
              </li>
              <li>
                <code class="code">char</code>
              </li>
              <li>
                <code class="code">class</code>
              </li>
              <li>
                <code class="code">const</code>
              </li>
              <li>
                <code class="code">debugger</code>
              </li>
              <li>
                <code class="code">double</code>
              </li>
              <li>
                <code class="code">enum</code>
              </li>
              <li>
                <code class="code">export</code>
              </li>
              <li>
                <code class="code">extends</code>
              </li>
              <li>
                <code class="code">final</code>
              </li>
              <li>
                <code class="code">float</code>
              </li>
              <li>
                <code class="code">goto</code>
              </li>
              <li>
                <code class="code">implements</code>
              </li>
              <li>
                <code class="code">import</code>
              </li>
              <li>
                <code class="code">int</code>
              </li>
              <li>
                <code class="code">interface</code>
              </li>
              <li>
                <code class="code">long</code>
              </li>
              <li>
                <code class="code">native</code>
              </li>
              <li>
                <code class="code">package</code>
              </li>
              <li>
                <code class="code">private</code>
              </li>
              <li>
                <code class="code">protected</code>
              </li>
              <li>
                <code class="code">public</code>
              </li>
              <li>
                <code class="code">short</code>
              </li>
              <li>
                <code class="code">static</code>
              </li>
              <li>
                <code class="code">super</code>
              </li>
              <li>
                <code class="code">synchronized</code>
              </li>
              <li>
                <code class="code">throws</code>
              </li>
              <li>
                <code class="code">transient</code>
              </li>
              <li>
                <code class="code">volatile</code>
              </li>
            </ul>
          </div>
          <div title="Arrays" class="section">
            <h2 class="title">
              Arrays
            </h2>
            <p>
              Arrays are zero-indexed lists of values. They are a handy way to store a set of related items of the same type (such as strings), though in reality, an array can include multiple types of items, including other arrays.
            </p>
            <div class="example">
              <p class="title">
                <b>A simple array</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'hello', 'world' ];
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Accessing array items by index</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'hello', 'world', 'foo', 'bar' ];
console.log(myArray[3]);   // logs 'bar'
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Testing the size of an array</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'hello', 'world' ];
console.log(myArray.length);   // logs 2
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Changing the value of an array item</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'hello', 'world' ];
myArray[1] = 'changed';
</pre>
              </div>
            </div>
            <p class="remark">
              <i><span class="remark">While it's possible to change the value of an array item as shown in</span> “Changing the value of an array item”, it's generally not advised.</i>
            </p>
            <div class="example">
              <p class="title">
                <b>Adding elements to an array</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'hello', 'world' ];
myArray.push('new');
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Working with arrays</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myArray = [ 'h', 'e', 'l', 'l', 'o' ];
var myString = myArray.join('');   // 'hello'
var mySplit = myString.split('');  // [ 'h', 'e', 'l', 'l', 'o' ]
</pre>
              </div>
            </div>
          </div>
          <h2 class="title">
            Objects
          </h2>
          <p>
            Objects contain one or more key-value pairs. The key portion can be any string. The value portion can be any type of value: a number, a string, an array, a function, or even another object.
          </p>
          <p>
            <span class="termdef">[Definition: When one of these values is a function, it’s called a <em class="firstterm">method</em> of the object.]</span> Otherwise, they are called properties.
          </p>
          <p>
            As it turns out, nearly everything in JavaScript is an object — arrays, functions, numbers, even strings — and they all have properties and methods.
          </p>
          <div class="example">
            <p class="title">
              <b>Creating an "object literal"</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var myObject = {
    sayHello : function() {
        console.log('hello');
    },

    myName : 'Rebecca'
};

myObject.sayHello();            // logs 'hello'
console.log(myObject.myName);   // logs 'Rebecca'
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            When creating object literals, you should note that the key portion of each key-value pair can be written as any valid JavaScript identifier, a string (wrapped in quotes) or a number:
          </p>
          <pre class="programlisting">
var myObject = {
    validIdentifier: 123,
    'some string': 456,
    99999: 789
};
</pre>
          <p>
            Object literals can be extremely useful for code organization; for more information, read <a href="http://blog.rebeccamurphey.com/2009/10/15/using-objects-to-organize-your-code/" class="ulink">Using Objects to Organize Your Code</a> by Rebecca Murphey.
          </p>
          </div>
          <div title="Functions" class="section">
            <h2 class="title">
              Functions
            </h2>
            <p>
              Functions contain blocks of code that need to be executed repeatedly. Functions can take zero or more arguments, and can optionally return a value.
            </p>
            <p>
              Functions can be created in a variety of ways:
            </p>
            <div class="example">
              <p class="title">
                <b>Function Declaration</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
function foo() { /* do something */ }
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Named Function Expression</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = function() { /* do something */ }
</pre>
              </div>
            </div>
            <p class="remark">
              <i><span class="remark">I prefer the named function expression method of setting a function's name, for some rather</span></i> <i><a href="http://yura.thinkweb2.com/named-function-expressions/" class="ulink">in-depth and technical reasons</a>. You are likely to see both methods used in others' JavaScript code.</i>
            </p>
            <div title="Using Functions" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Using Functions
                </h3>
              </div>
              <div class="example">
                <p class="title">
                  <b>A simple function</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var greet = function(person, greeting) {
    var text = greeting + ', ' + person;
    console.log(text);
};


greet('Rebecca', 'Hello');
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>A function that returns a value</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var greet = function(person, greeting) {
    var text = greeting + ', ' + person;
    return text;
};

console.log(greet('Rebecca','hello'));
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>A function that returns another function</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var greet = function(person, greeting) {
    var text = greeting + ', ' + person;
    return function() { console.log(text); };
};


var greeting = greet('Rebecca', 'Hello');
greeting();
</pre>
                </div>
              </div>
            </div>
            <div title="Self-Executing Anonymous Functions" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Self-Executing Anonymous Functions
                </h3>
              </div>
              <p>
                A common pattern in JavaScript is the self-executing anonymous function. This pattern creates a function expression and then immediately executes the function. This pattern is extremely useful for cases where you want to avoid polluting the global namespace with your code -- no variables declared inside of the function are visible outside of it.
              </p>
              <div class="example">
                <p class="title">
                  <b>A self-executing anonymous function</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
(function(){
    var foo = 'Hello world';
})();


console.log(foo);   // undefined!
</pre>
                </div>
              </div>
            </div>
            <div title="Functions as Arguments" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Functions as Arguments
                </h3>
              </div>
              <p>
                In JavaScript, functions are "first-class citizens" -- they can be assigned to variables or passed to other functions as arguments. Passing functions as arguments is an extremely common idiom in jQuery.
              </p>
              <div class="example">
                <p class="title">
                  <b>Passing an anonymous function as an argument</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var myFn = function(fn) {
    var result = fn();
    console.log(result);
};

myFn(function() { return 'hello world'; });   // logs 'hello world'
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Passing a named function as an argument</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var myFn = function(fn) {
    var result = fn();
    console.log(result);
};

var myOtherFn = function() {
    return 'hello world';
};

myFn(myOtherFn);   // logs 'hello world'
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Testing Type" class="section">
            <h2 class="title">
              Testing Type
            </h2>
            <p>
              JavaScript offers a way to test the "type" of a variable. However, the result can be confusing -- for example, the type of an Array is "object".
            </p>
            <p>
              It's common practice to use the <code class="code">typeof</code> operator when trying to determining the type of a specific value.
            </p>
            <div class="example">
              <p class="title">
                <b>Testing the type of various variables</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myFunction = function() {
    console.log('hello');
};

var myObject = {
    foo : 'bar'
};

var myArray = [ 'a', 'b', 'c' ];

var myString = 'hello';

var myNumber = 3;

typeof myFunction;   // returns 'function'
typeof myObject;     // returns 'object'
typeof myArray;      // <span class="bold"><strong>returns 'object' -- careful!</strong></span>
typeof myString;     // returns 'string';
typeof myNumber;     // returns 'number'

typeof null;         // <span class="bold"><strong>returns 'object' -- careful!</strong></span>


if (myArray.push &amp;&amp; myArray.slice &amp;&amp; myArray.join) {
    // probably an array
    // (this is called "duck typing")
}

if (Object.prototype.toString.call(myArray) === '[object Array]') {
    // Definitely an array!
    // This is widely considered as the most robust way
    // to determine if a specific value is an Array.
}
</pre>
              </div>
            </div>
            <p>
              jQuery offers utility methods to help you determine the type of an arbitrary value. These will be covered later.
            </p>
          </div>
          <h2 class="title">
            The <code class="code">this</code> keyword
          </h2>
          <p>
            In JavaScript, as in most object-oriented programming languages, <code class="code">this</code> is a special keyword that is used within methods to refer to the object on which a method is being invoked. The value of <code class="code">this</code> is determined using a simple series of steps:
          </p>
          <div class="orderedlist">
            <ol class="orderedlist">
              <li>If the function is invoked using <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call" class="ulink">Function.call</a> or <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply" class="ulink">Function.apply</a>, <code class="code">this</code> will be set to the first argument passed to call/apply. If the first argument passed to call/apply is <code class="code">null</code> or <code class="code">undefined</code>, <code class="code">this</code> will refer to the global object (which is the <code class="code">window</code> object in Web browsers).
              </li>
              <li>If the function being invoked was created using <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind" class="ulink">Function.bind</a>, <code class="code">this</code> will be the first argument that was passed to bind at the time the function was created.
              </li>
              <li>If the function is being invoked as a method of an object, <code class="code">this</code> will refer to that object.
              </li>
              <li>Otherwise, the function is being invoked as a standalone function not attached to any object, and <code class="code">this</code> will refer to the global object.
              </li>
            </ol>
          </div>
          <div class="example">
            <p class="title">
              <b>A function invoked using Function.call</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var myObject = {
    sayHello : function() {
        console.log('Hi! My name is ' + this.myName);
    },

    myName : 'Rebecca'
};

var secondObject = {
    myName : 'Colin'
};

myObject.sayHello();                  // logs 'Hi! My name is Rebecca'
myObject.sayHello.call(secondObject); // logs 'Hi! My name is Colin'
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>A function created using Function.bind</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var myName = 'the global object',

    sayHello = function () {
        console.log('Hi! My name is ' + this.myName);
    },

    myObject = {
        myName : 'Rebecca'
    };

var myObjectHello = sayHello.bind(myObject);

sayHello();       // logs 'Hi! My name is the global object'
myObjectHello();  // logs 'Hi! My name is Rebecca'
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>A function being attached to an object at runtime</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var myName = 'the global object',

    sayHello = function() {
        console.log('Hi! My name is ' + this.myName);
    },

    myObject = {
        myName : 'Rebecca'
    },

    secondObject = {
        myName : 'Colin'
    };

myObject.sayHello = sayHello;
secondObject.sayHello = sayHello;

sayHello();               // logs 'Hi! My name is the global object'
myObject.sayHello();      // logs 'Hi! My name is Rebecca'
secondObject.sayHello();  // logs 'Hi! My name is Colin'
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            When invoking a function deep within a long namespace, it is often tempting to reduce the amount of code you need to type by storing a reference to the actual function as a single, shorter variable. It is important not to do this with instance methods as this will cause the value of <code class="code">this</code> within the function to change, leading to incorrect code operation. For instance:
          </p>
          <pre class="programlisting">
var myNamespace = {
    myObject : {
        sayHello : function() {
            console.log('Hi! My name is ' + this.myName);
        },

        myName : 'Rebecca'
    }
};

var hello = myNamespace.myObject.sayHello;

hello();  // logs 'Hi! My name is undefined'
</pre>
          <p>
            You can, however, safely reduce everything up to the object on which the method is invoked:
          </p>
          <pre class="programlisting">
var myNamespace = {
    myObject : {
        sayHello : function() {
            console.log('Hi! My name is ' + this.myName);
        },

        myName : 'Rebecca'
    }
};

var obj = myNamespace.myObject;

obj.sayHello();  // logs 'Hi! My name is Rebecca'
</pre>
          </div>
          <div title="Scope" class="section">
            <h2 class="title">
              Scope
            </h2>
            <p>
              "Scope" refers to the variables that are available to a piece of code at a given time. A lack of understanding of scope can lead to frustrating debugging experiences.
            </p>
            <p>
              When a variable is declared inside of a function using the <code class="code">var</code> keyword, it is only available to code inside of that function -- code outside of that function cannot access the variable. On the other hand, functions defined <span class="emphasis"><em>inside</em></span> that function <span class="emphasis"><em>will</em></span> have access to to the declared variable.
            </p>
            <p>
              Furthermore, variables that are declared inside a function without the <code class="code">var</code> keyword are not local to the function -- JavaScript will traverse the scope chain all the way up to the window scope to find where the variable was previously defined. If the variable wasn't previously defined, it will be defined in the global scope, which can have extremely unexpected consequences;
            </p>
            <div class="example">
              <p class="title">
                <b>Functions have access to variables defined in the same scope</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = 'hello';

var sayHello = function() {
    console.log(foo);
};

sayHello();         // logs 'hello'
console.log(foo);   // also logs 'hello'
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Code outside the scope in which a variable was defined does not have access to the variable</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var sayHello = function() {
    var foo = 'hello';
    console.log(foo);
};

sayHello();         // logs 'hello'
console.log(foo);   // doesn't log anything
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Variables with the same name can exist in different scopes with different values</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = 'world';

var sayHello = function() {
    var foo = 'hello';
    console.log(foo);
};

sayHello();         // logs 'hello'
console.log(foo);   // logs 'world'
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Functions can "see" changes in variable values after the function is defined</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myFunction = function() {
    var foo = 'hello';

    var myFn = function() {
        console.log(foo);
    };

    foo = 'world';

    return myFn;
};

var f = myFunction();
f();  // logs 'world' -- uh oh
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Scope insanity</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
// a self-executing anonymous function
(function() {
    var baz = 1;
    var bim = function() { alert(baz); };
    bar = function() { alert(baz); };
})();

console.log(baz);  // baz is not defined outside of the function

bar();  // bar is defined outside of the anonymous function
        // because it wasn't declared with var; furthermore,
        // because it was defined in the same scope as baz,
        // it has access to baz even though other code
        // outside of the function does not

bim();  // bim is not defined outside of the anonymous function,
        // so this will result in an error
</pre>
              </div>
            </div>
          </div>
          <div title="Closures" class="section">
            <h2 class="title">
              Closures
            </h2>
            <p>
              Closures are an extension of the concept of scope — functions have access to variables that were available in the scope where the function was created. If that’s confusing, don’t worry: closures are generally best understood by example.
            </p>
            <p>
              In “Functions can "see" changes in variable values after the function is defined”, we saw how functions have access to changing variable values. The same sort of behavior exists with functions defined within loops -- the function "sees" the change in the variable's value even after the function is defined, resulting in all clicks alerting 5.
            </p>
            <div class="example">
              <p class="title">
                <b>How to lock in the value of <code class="code">i</code>?</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
/* this won't behave as we want it to; */
/* every click will alert 5 */
for (var i=0; i&lt;5; i++) {
    $('&lt;p&gt;click me&lt;/p&gt;').appendTo('body').click(function() {
        alert(i);
    });
}
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Locking in the value of <code class="code">i</code> with a closure</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
/* fix: “close” the value of i inside createFunction, so it won't change */
var createFunction = function(i) {
    return function() { alert(i); };
};

for (var i=0; i&lt;5; i++) {
    $('&lt;p&gt;click me&lt;/p&gt;').appendTo('body').click(createFunction(i));
}
</pre>
              </div>
            </div>
            <p>
              Closures can also be used to resolve issues with the <code class="code">this</code> keyword, which is unique to each scope:
            </p>
            <div class="example">
              <p class="title">
                <b>Using a closure to access inner and outer object instances simultaneously</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var outerObj = {
    myName : 'outer',
    outerFunction : function () {

        // provide a reference to outerObj through innerFunction's closure
        var self = this;

        var innerObj = {
            myName : 'inner',
            innerFunction : function () {
                console.log(self.myName, this.myName); // logs 'outer inner'
            }
        };

        innerObj.innerFunction();

        console.log(this.myName); // logs 'outer'
    }
};

outerObj.outerFunction();
</pre>
              </div>
            </div>
            <p>
              This mechanism can be particularly useful when dealing with callbacks, though in those cases, it is often better to use <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind" class="ulink">Function.bind</a>, which will avoid any overhead associated with scope traversal.
            </p>
          </div>
        </div>
      </div>
      <div title="Part&nbsp;II.&nbsp;jQuery: Basic Concepts" class="part">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                Part&nbsp;II.&nbsp;jQuery: Basic Concepts
              </h1>
            </div>
          </div>
        </div>
        <div title="Query Basics" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Query Basics
                </h2>
              </div>
            </div>
          </div>
          <div title="$(document).ready()" class="section">
            <h2 class="title">
              $(document).ready()
            </h2>
            <p>
              You cannot safely manipulate a page until the document is “ready.” jQuery detects this state of readiness for you; code included inside <code class="code">$(document).ready()</code> will only run once the page is ready for JavaScript code to execute.
            </p>
            <div class="example">
              <p class="title">
                <b>A $(document).ready() block</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$(document).ready(function() {
    console.log('ready!');
});
</pre>
              </div>
            </div>
            <p>
              There is a shorthand for <code class="code">$(document).ready()</code> that you will sometimes see; however, I recommend against using it if you are writing code that people who aren't experienced with jQuery may see.
            </p>
            <div class="example">
              <p class="title">
                <b>Shorthand for $(document).ready()</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$(function() {
    console.log('ready!');
});
</pre>
              </div>
            </div>
            <p>
              You can also pass a named function to <code class="code">$(document).ready()</code> instead of passing an anonymous function.
            </p>
            <div class="example">
              <p class="title">
                <b>Passing a named function instead of an anonymous function</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
function readyFn() {
    // code to run when the document is ready
}


$(document).ready(readyFn);
</pre>
              </div>
            </div>
          </div>
          <h2 class="title">
            Selecting Elements
          </h2>
          <p>
            The most basic concept of jQuery is to “select some elements and do something with them.” jQuery supports most CSS3 selectors, as well as some non-standard selectors. For a complete selector reference, visit <a href="http://api.jquery.com/category/selectors/" class="ulink">http://api.jquery.com/category/selectors/</a>.
          </p>
          <p>
            Following are a few examples of common selection techniques.
          </p>
          <div class="example">
            <p class="title">
              <b>Selecting elements by ID</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('#myId'); // note IDs must be unique per page
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Selecting elements by class name</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('div.myClass'); // performance improves if you specify element type
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Selecting elements by attribute</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('input[name=first_name]'); // beware, this can be very slow
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Selecting elements by compound CSS selector</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('#contents ul.people li');
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Pseudo-selectors</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('a.external:first');
$('tr:odd');
$('#myForm :input');   // select all input-like elements in a form
$('div:visible');
$('div:gt(2)');        // all except the first three divs
$('div:animated');     // all currently animated divs
</pre>
            </div>
          </div>
          <div>
          <h3 class="title">
            Note
          </h3>
          <p>
            When you use the <code class="code">:visible</code> and <code class="code">:hidden</code> pseudo-selectors, jQuery tests the actual visibility of the element, not its CSS visibility or display — that is, it looks to see if the element's <span class="emphasis"><em>physical height and width on the page</em></span> are both greater than zero. However, this test doesn't work with <code class="code">&lt;tr&gt;</code> elements; in this case, jQuery does check the CSS <code class="code">display</code> property, and considers an element hidden if its <code class="code">display</code> property is set to <code class="code">none</code>. Elements that have not been added to the DOM will always be considered hidden, even if the CSS that would affect them would render them visible. (See the Manipulation section later in this chapter to learn how to create and add elements to the DOM.)
          </p>
          <p>
            For reference, here is the code jQuery uses to determine whether an element is visible or hidden, with comments added for clarity:
          </p>
          <pre class="programlisting">
jQuery.expr.filters.hidden = function( elem ) {
    var width = elem.offsetWidth, height = elem.offsetHeight,
        skip = elem.nodeName.toLowerCase() === "tr";

    // does the element have 0 height, 0 width,
    // and it's not a &lt;tr&gt;?
    return width === 0 &amp;&amp; height === 0 &amp;&amp; !skip ?

        // then it must be hidden
        true :

        // but if it has width and height
        // and it's not a &lt;tr&gt;
        width &gt; 0 &amp;&amp; height &gt; 0 &amp;&amp; !skip ?

            // then it must be visible
            false :

            // if we get here, the element has width
            // and height, but it's also a &lt;tr&gt;,
            // so check its display property to
            // decide whether it's hidden
            jQuery.curCSS(elem, "display") === "none";
};

jQuery.expr.filters.visible = function( elem ) {
    return !jQuery.expr.filters.hidden( elem );
};
</pre>
          </div>
          <div title="Choosing Selectors" class="sidebar">
            <p class="title">
              <b>Choosing Selectors</b>
            </p>
            <p>
              Choosing good selectors is one way to improve the performance of your JavaScript. A little specificity — for example, including an element type such as <code class="code">div</code> when selecting elements by class name — can go a long way. Generally, any time you can give jQuery a hint about where it might expect to find what you're looking for, you should. On the other hand, too much specificity can be a bad thing. A selector such as <code class="code">#myTable thead tr th.special</code> is overkill if a selector such as <code class="code">#myTable th.special</code> will get you what you want.
            </p>
            <p>
              jQuery offers many attribute-based selectors, allowing you to make selections based on the content of arbitrary attributes using simplified regular expressions.
            </p>
            <pre class="programlisting">
// find all &lt;a&gt;s whose rel attribute
// ends with "thinger"
$("a[rel$='thinger']");
</pre>
            <p>
              While these can be useful in a pinch, they can also be extremely slow — I once wrote an attribute-based selector that locked up my page for multiple seconds. Wherever possible, make your selections using IDs, class names, and tag names.
            </p>
            <p>
              Want to know more? <a href="http://paulirish.com/perf" class="ulink">Paul Irish has a great presentation about improving performance in JavaScript</a>, with several slides focused specifically on selector performance.
            </p>
          </div>
          <div title="Does My Selection Contain Any Elements?" class="section">
            <div class="titlepage">
              <h3 class="title">
                Does My Selection Contain Any Elements?
              </h3>
            </div>
            <p>
              Once you've made a selection, you'll often want to know whether you have anything to work with. You may be inclined to try something like:
            </p>
            <pre class="programlisting">
if ($('div.foo')) { ... }
</pre>
            <p>
              This won't work. When you make a selection using <code class="code">$()</code>, an object is always returned, and objects always evaluate to <code class="code">true</code>. Even if your selection doesn't contain any elements, the code inside the <code class="code">if</code> statement will still run.
            </p>
            <p>
              Instead, you need to test the selection's length property, which tells you how many elements were selected. If the answer is 0, the length property will evaluate to false when used as a boolean value.
            </p>
            <div class="example">
              <p class="title">
                <b>Testing whether a selection contains elements</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
if ($('div.foo').length) { ... }
</pre>
              </div>
            </div>
          </div>
          <div class="titlepage">
            <h3 class="title">
              Saving Selections
            </h3>
          </div>
          <p>
            Every time you make a selection, a lot of code runs, and jQuery doesn't do caching of selections for you. If you've made a selection that you might need to make again, you should save the selection in a variable rather than making the selection repeatedly.
          </p>
          <div class="example">
            <p class="title">
              <b>Storing selections in a variable</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var $divs = $('div');
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            In “Storing selections in a variable”, the variable name begins with a dollar sign. Unlike in other languages, there's nothing special about the dollar sign in JavaScript -- it's just another character. We use it here to indicate that the variable contains a jQuery object. This practice -- a sort of <a href="http://en.wikipedia.org/wiki/Hungarian_notation" class="ulink">Hungarian notation</a> -- is merely convention, and is not mandatory.
          </p>
          </div>
          <p>
            Once you've stored your selection, you can call jQuery methods on the variable you stored it in just like you would have called them on the original selection.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            A selection only fetches the elements that are on the page when you make the selection. If you add elements to the page later, you'll have to repeat the selection or otherwise add them to the selection stored in the variable. Stored selections don't magically update when the DOM changes.
          </p>
          </div>
          <div title="Refining &amp; Filtering Selections" class="section">
            <div class="titlepage">
              <h3 class="title">
                Refining &amp; Filtering Selections
              </h3>
            </div>
            <p>
              Sometimes you have a selection that contains more than what you're after; in this case, you may want to refine your selection. jQuery offers several methods for zeroing in on exactly what you're after.
            </p>
            <div class="example">
              <p class="title">
                <b>Refining selections</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('div.foo').has('p');          // div.foo elements that contain &lt;p&gt;'s
$('h1').not('.bar');            // h1 elements that don't have a class of bar
$('ul li').filter('.current');  // unordered list items with class of current
$('ul li').first();             // just the first unordered list item
$('ul li').eq(5);               // the sixth
</pre>
              </div>
            </div>
          </div>
          <div title="Selecting Form Elements" class="section">
            <div class="titlepage">
              <h3 class="title">
                Selecting Form Elements
              </h3>
            </div>
            <p>
              jQuery offers several pseudo-selectors that help you find elements in your forms; these are especially helpful because it can be difficult to distinguish between form elements based on their state or type using standard CSS selectors.
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">:button</span>
                </dt>
                <dd>
                  <p>
                    Selects <code class="code">&lt;button&gt;</code> elements and elements with <code class="code">type="button"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:checkbox</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="checkbox"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:checked</span>
                </dt>
                <dd>
                  <p>
                    Selects checked inputs
                  </p>
                </dd>
                <dt>
                  <span class="term">:disabled</span>
                </dt>
                <dd>
                  <p>
                    Selects disabled form elements
                  </p>
                </dd>
                <dt>
                  <span class="term">:enabled</span>
                </dt>
                <dd>
                  <p>
                    Selects enabled form elements
                  </p>
                </dd>
                <dt>
                  <span class="term">:file</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="file"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:image</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="image"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:input</span>
                </dt>
                <dd>
                  <p>
                    Selects <code class="code">&lt;input&gt;</code>, <code class="code">&lt;textarea&gt;</code>, and <code class="code">&lt;select&gt;</code> elements
                  </p>
                </dd>
                <dt>
                  <span class="term">:password</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="password"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:radio</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="radio"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:reset</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="reset"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:selected</span>
                </dt>
                <dd>
                  <p>
                    Selects options that are selected
                  </p>
                </dd>
                <dt>
                  <span class="term">:submit</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="submit"</code>
                  </p>
                </dd>
                <dt>
                  <span class="term">:text</span>
                </dt>
                <dd>
                  <p>
                    Selects inputs with <code class="code">type="text"</code>
                  </p>
                </dd>
              </dl>
            </div>
            <div class="example">
              <p class="title">
                <b>Using form-related pseduo-selectors</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$("#myForm :input'); // get all elements that accept input
</pre>
              </div>
            </div>
          </div>
          <div title="Working with Selections" class="section">
            <h2 class="title">
              Working with Selections
            </h2>
            <p>
              Once you have a selection, you can call methods on the selection. Methods generally come in two different flavors: getters and setters. Getters return a property of the first selected element; setters set a property on all selected elements.
            </p>
            <div class="titlepage">
              <h3 class="title">
                Chaining
              </h3>
            </div>
            <p>
              If you call a method on a selection and that method returns a jQuery object, you can continue to call jQuery methods on the object without pausing for a semicolon.
            </p>
            <div class="example">
              <p class="title">
                <b>Chaining</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#content').find('h3').eq(2).html('new text for the third h3!');
</pre>
              </div>
            </div>
            <p>
              If you are writing a chain that includes several steps, you (and the person who comes after you) may find your code more readable if you break the chain over several lines.
            </p>
            <div class="example">
              <p class="title">
                <b>Formatting chained code</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#content')
    .find('h3')
    .eq(2)
    .html('new text for the third h3!');
</pre>
              </div>
            </div>
            <p>
              If you change your selection in the midst of a chain, jQuery provides the <code class="code">$.fn.end</code> method to get you back to your original selection.
            </p>
            <div class="example">
              <p class="title">
                <b>Restoring your original selection using <code class="code">$.fn.end</code></b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#content')
    .find('h3')
    .eq(2)
        .html('new text for the third h3!')
    .end() // restores the selection to all h3's in #content
    .eq(0)
        .html('new text for the first h3!');
</pre>
              </div>
            </div>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              Chaining is extraordinarily powerful, and it's a feature that many libraries have adapted since it was made popular by jQuery. However, it must be used with care. Extensive chaining can make code extremely difficult to modify or debug. There is no hard-and-fast rule to how long a chain should be -- just know that it is easy to get carried away.
            </p>
            </div>
            <div title="Getters &amp; Setters" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Getters &amp; Setters
                </h3>
              </div>
              <p>
                jQuery “overloads” its methods, so the method used to set a value generally has the same name as the method used to get a value. When a method is used to set a value, it is called a setter. When a method is used to get (or read) a value, it is called a getter. Setters affect all elements in a selection; getters get the requested value only for the first element in the selection.
              </p>
              <div class="example">
                <p class="title">
                  <b>The <code class="code">$.fn.html</code> method used as a setter</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('h1').html('hello world');
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>The html method used as a getter</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('h1').html();
</pre>
                </div>
              </div>
              <p>
                Setters return a jQuery object, allowing you to continue to call jQuery methods on your selection; getters return whatever they were asked to get, meaning you cannot continue to call jQuery methods on the value returned by the getter.
              </p>
            </div>
          </div>
          <h2 class="title">
            CSS, Styling, &amp; Dimensions
          </h2>
          <p>
            jQuery includes a handy way to get and set CSS properties of elements.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            CSS properties that normally include a hyphen need to be <em class="firstterm">camel cased</em> in JavaScript. For example, the CSS property <code class="code">font-size</code> is expressed as <code class="code">fontSize</code> in JavaScript.
          </p>
          </div>
          <div class="example">
            <p class="title">
              <b>Getting CSS properties</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('h1').css('fontSize'); // returns a string such as "19px"
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Setting CSS properties</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('h1').css('fontSize', '100px'); // setting an individual property
$('h1').css({ 'fontSize' : '100px', 'color' : 'red' }); // setting multiple properties
</pre>
            </div>
          </div>
          <p class="remark">
            <i><span class="remark">Note the style of the argument we use on the second line -- it is an object that contains multiple properties. This is a common way to pass multiple arguments to a function, and many jQuery setter methods accept objects to set mulitple values at once.</span></i>
          </p>
          <div title="Using CSS Classes for Styling" class="section">
            <div class="titlepage">
              <h3 class="title">
                Using CSS Classes for Styling
              </h3>
            </div>
            <p>
              As a getter, the <code class="code">$.fn.css</code> method is valuable; however, it should generally be avoided as a setter in production-ready code, because you don't want presentational information in your JavaScript. Instead, write CSS rules for classes that describe the various visual states, and then simply change the class on the element you want to affect.
            </p>
            <div class="example">
              <p class="title">
                <b>Working with classes</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var $h1 = $('h1');

$h1.addClass('big');
$h1.removeClass('big');
$h1.toggleClass('big');

if ($h1.hasClass('big')) { ... }
</pre>
              </div>
            </div>
            <p>
              Classes can also be useful for storing state information about an element, such as indicating that an element is selected.
            </p>
          </div>
          <div title="Dimensions" class="section">
            <div class="titlepage">
              <h3 class="title">
                Dimensions
              </h3>
            </div>
            <p>
              jQuery offers a variety of methods for obtaining and modifying dimension and position information about an element.
            </p>
            <p>
              The code in “Basic dimensions methods”, is just a very brief overview of the dimensions functionality in jQuery; for complete details about jQuery dimension methods, visit <a href="http://api.jquery.com/category/dimensions/" class="ulink">http://api.jquery.com/category/dimensions/</a>.
            </p>
            <div class="example">
              <p class="title">
                <b>Basic dimensions methods</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('h1').width('50px');   // sets the width of all H1 elements
$('h1').width();         // gets the width of the first H1

$('h1').height('50px');  // sets the height of all H1 elements
$('h1').height();        // gets the height of the first H1

$('h1').position();      // returns an object containing position
                         // information for the first H1 relative to
                         // its "offset (positioned) parent"
</pre>
              </div>
            </div>
          </div>
          <div title="Attributes" class="section">
            <h2 class="title">
              Attributes
            </h2>
            <p>
              An element's attributes can contain useful information for your application, so it's important to be able to get and set them.
            </p>
            <p>
              The <code class="code">$.fn.attr</code> method acts as both a getter and a setter. As with the <code class="code">$.fn.css</code> method, <code class="code">$.fn.attr</code> as a setter can accept either a key and a value, or an object containing one or more key/value pairs.
            </p>
            <div class="example">
              <p class="title">
                <b>Setting attributes</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('a').attr('href', 'allMyHrefsAreTheSameNow.html');
$('a').attr({
    'title' : 'all titles are the same too!',
    'href' : 'somethingNew.html'
});
</pre>
              </div>
            </div>
            <p class="remark">
              <i><span class="remark">This time, we broke the object up into multiple lines. Remember, whitespace doesn't matter in JavaScript, so you should feel free to use it liberally to make your code more legible! You can use a minification tool later to strip out unnecessary whitespace for production.</span></i>
            </p>
            <div class="example">
              <p class="title">
                <b>Getting attributes</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('a').attr('href');  // returns the href for the first a element in the document
</pre>
              </div>
            </div>
          </div>
          <h2 class="title">
            Traversing
          </h2>
          <p>
            Once you have a jQuery selection, you can find other elements using your selection as a starting point.
          </p>
          <p>
            For complete documentation of jQuery traversal methods, visit <a href="http://api.jquery.com/category/traversing/" class="ulink">http://api.jquery.com/category/traversing/</a>.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            Be cautious with traversing long distances in your documents -- complex traversal makes it imperative that your document's structure remain the same, something that's difficult to guarantee even if you're the one creating the whole application from server to client. One- or two-step traversal is fine, but you generally want to avoid traversals that take you from one container to another.
          </p>
          </div>
          <div class="example">
            <p class="title">
              <b>Moving around the DOM using traversal methods</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('h1').next('p');
$('div:visible').parent();
$('input[name=first_name]').closest('form');
$('#myList').children();
$('li.selected').siblings();
</pre>
            </div>
          </div>
          <p>
            You can also iterate over a selection using <code class="code">$.fn.each</code>. This method iterates over all of the elements in a selection, and runs a function for each one. The function receives the index of the current element and the DOM element itself as arguments. Inside the function, the DOM element is also available as <code class="code">this</code> by default.
          </p>
          <div class="example">
            <p class="title">
              <b>Iterating over a selection</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('#myList li').each(function(idx, el) {
    console.log(
        'Element ' + idx +
        'has the following html: ' +
        $(el).html()
    );
});
</pre>
            </div>
          </div>
          <div title="Manipulating Elements" class="section">
            <h2 class="title">
              Manipulating Elements
            </h2>
            <p>
              Once you've made a selection, the fun begins. You can change, move, remove, and clone elements. You can also create new elements via a simple syntax.
            </p>
            <p>
              For complete documentation of jQuery manipulation methods, visit <a href="http://api.jquery.com/category/manipulation/" class="ulink">http://api.jquery.com/category/manipulation/</a>.
            </p>
            <div class="titlepage">
              <h3 class="title">
                Getting and Setting Information about Elements
              </h3>
            </div>
            <p>
              There are any number of ways you can change an existing element. Among the most common tasks you'll perform is changing the inner HTML or attribute of an element. jQuery offers simple, cross-browser methods for these sorts of manipulations. You can also get information about elements using many of the same methods in their getter incarnations. We'll see examples of these throughout this section, but specifically, here are a few methods you can use to get and set information about elements.
            </p>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              Changing things about elements is trivial, but remember that the change will affect <span class="emphasis"><em>all</em></span> elements in the selection, so if you just want to change one element, be sure to specify that in your selection before calling a setter method.
            </p>
            </div>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              When methods act as getters, they generally only work on the first element in the selection, and they do not return a jQuery object, so you can't chain additional methods to them. One notable exception is <code class="code">$.fn.text</code>; as mentioned below, it gets the text for all elements in the selection.
            </p>
            </div>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">$.fn.html</span>
                </dt>
                <dd>
                  <p>
                    Get or set the html contents.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.text</span>
                </dt>
                <dd>
                  <p>
                    Get or set the text contents; HTML will be stripped.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.attr</span>
                </dt>
                <dd>
                  <p>
                    Get or set the value of the provided attribute.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.width</span>
                </dt>
                <dd>
                  <p>
                    Get or set the width in pixels of the first element in the selection as an integer.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.height</span>
                </dt>
                <dd>
                  <p>
                    Get or set the height in pixels of the first element in the selection as an integer.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.position</span>
                </dt>
                <dd>
                  <p>
                    Get an object with position information for the first element in the selection, relative to its first positioned ancestor. <span class="emphasis"><em>This is a getter only.</em></span>
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.val</span>
                </dt>
                <dd>
                  <p>
                    Get or set the value of form elements.
                  </p>
                </dd>
              </dl>
            </div>
            <div class="example">
              <p class="title">
                <b>Changing the HTML of an element</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myDiv p:first')
    .html('New &lt;strong&gt;first&lt;/strong&gt; paragraph!');
</pre>
              </div>
            </div>
            <div title="Moving, Copying, and Removing Elements" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Moving, Copying, and Removing Elements
                </h3>
              </div>
              <p>
                There are a variety of ways to move elements around the DOM; generally, there are two approaches:
              </p>
              <ul>
                <li>
                  <p>
                    Place the selected element(s) relative to another element
                  </p>
                </li>
                <li>
                  <p>
                    Place an element relative to the selected element(s)
                  </p>
                </li>
              </ul>
              <p>
                For example, jQuery provides <code class="code">$.fn.insertAfter</code> and <code class="code">$.fn.after</code>. The <code class="code">$.fn.insertAfter</code> method places the selected element(s) after the element that you provide as an argument; the <code class="code">$.fn.after</code> method places the element provided as an argument after the selected element. Several other methods follow this pattern: <code class="code">$.fn.insertBefore</code> and <code class="code">$.fn.before</code>; <code class="code">$.fn.appendTo</code> and <code class="code">$.fn.append</code>; and <code class="code">$.fn.prependTo</code> and <code class="code">$.fn.prepend</code>.
              </p>
              <p>
                The method that makes the most sense for you will depend on what elements you already have selected, and whether you will need to store a reference to the elements you're adding to the page. If you need to store a reference, you will always want to take the first approach -- placing the selected elements relative to another element -- as it returns the element(s) you're placing. In this case, <code class="code">$.fn.insertAfter</code>, <code class="code">$.fn.insertBefore</code>, <code class="code">$.fn.appendTo</code>, and <code class="code">$.fn.prependTo</code> will be your tools of choice.
              </p>
              <div class="example">
                <p class="title">
                  <b>Moving elements using different approaches</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
// make the first list item the last list item
var $li = $('#myList li:first').appendTo('#myList');

// another approach to the same problem
$('#myList').append($('#myList li:first'));

// note that there's no way to access the
// list item that we moved, as this returns
// the list itself
</pre>
                </div>
              </div>
              <div class="titlepage">
                <h4 class="title">
                  Cloning Elements
                </h4>
              </div>
              <p>
                When you use methods such as $.fn.appendTo, you are moving the element; sometimes you want to make a copy of the element instead. In this case, you'll need to use $.fn.clone first.
              </p>
              <div class="example">
                <p class="title">
                  <b>Making a copy of an element</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
// copy the first list item to the end of the list
$('#myList li:first').clone().appendTo('#myList');
</pre>
                </div>
              </div>
              <div class="note">
              <h3 class="title">
                Note
              </h3>
              <p>
                If you need to copy related data and events, be sure to pass <code class="code">true</code> as an argument to <code class="code">$.fn.clone</code>.
              </p>
              </div>
              <div class="titlepage">
                <h4 class="title">
                  Removing Elements
                </h4>
              </div>
              <p>
                There are two ways to remove elements from the page: <code class="code">$.fn.remove</code> and <code class="code">$.fn.detach</code>. You'll use <code class="code">$.fn.remove</code> when you want to permanently remove the selection from the page; while the method does return the removed element(s), those elements will not have their associated data and events attached to them if you return them to the page.
              </p>
              <p>
                If you need the data and events to persist, you'll want to use <code class="code">$.fn.detach</code> instead. Like <code class="code">$.fn.remove</code>, it returns the selection, but it also maintains the data and events associated with the selection, so you can restore the selection to the page at a later time.
              </p>
              <div class="note">
              <h3 class="title">
                Note
              </h3>
              <p>
                The <code class="code">$.fn.detach</code> method is extremely valuable if you are doing heavy manipulation to an element. In that case, it's beneficial to <code class="code">$.fn.detach</code> the element from the page, work on it in your code, and then restore it to the page when you're done. This saves you from expensive "DOM touches" while maintaining the element's data and events.
              </p>
              </div>
              <p>
                If you want to leave the element on the page but simply want to remove its contents, you can use <code class="code">$.fn.empty</code> to dispose of the element's inner HTML.
              </p>
            </div>
            <div class="titlepage">
              <h3 class="title">
                Creating New Elements
              </h3>
            </div>
            <p>
              jQuery offers a trivial and elegant way to create new elements using the same <code class="code">$()</code> method you use to make selections.
            </p>
            <div class="example">
              <p class="title">
                <b>Creating new elements</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('&lt;p&gt;This is a new paragraph&lt;/p&gt;');
$('&lt;li class="new"&gt;new list item&lt;/li&gt;');
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Creating a new element with an attribute object</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('&lt;a/&gt;', {
    html : 'This is a &lt;strong&gt;new&lt;/strong&gt; link',
    'class' : 'new',
    href : 'foo.html'
});
</pre>
              </div>
            </div>
            <p class="remark">
              <i><span class="remark">Note that in the attributes object we included as the second argument, the property name class is quoted, while the property names text and href are not. Property names generally do not need to be quoted unless they are reserved words (as class is in this case).</span></i>
            </p>
            <p>
              When you create a new element, it is not immediately added to the page. There are several ways to add an element to the page once it's been created.
            </p>
            <div class="example">
              <p class="title">
                <b>Getting a new element on to the page</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var $myNewElement = $('&lt;p&gt;New element&lt;/p&gt;');
$myNewElement.appendTo('#content');

$myNewElement.insertAfter('ul:last'); // this will remove the p from #content!
$('ul').last().after($myNewElement.clone());  // clone the p so now we have 2
</pre>
              </div>
            </div>
            <p class="remark">
              <i><span class="remark">Strictly speaking, you don't have to store the created element in a variable -- you could just call the method to add the element to the page directly after the $(). However, most of the time you will want a reference to the element you added, so you don't need to select it later.</span></i>
            </p>
            <p>
              You can even create an element as you're adding it to the page, but note that in this case you don't get a reference to the newly created element.
            </p>
            <div class="example">
              <p class="title">
                <b>Creating and adding an element to the page at the same time</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('ul').append('&lt;li&gt;list item&lt;/li&gt;');
</pre>
              </div>
            </div>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              The syntax for adding new elements to the page is so easy, it's tempting to forget that there's a huge performance cost for adding to the DOM repeatedly. If you are adding many elements to the same container, you'll want to concatenate all the html into a single string, and then append that string to the container instead of appending the elements one at a time. You can use an array to gather all the pieces together, then <code class="code">join</code> them into a single string for appending.
            </p>
            <pre class="programlisting">
var myItems = [], $myList = $('#myList');

for (var i=0; i&lt;100; i++) {
    myItems.push('&lt;li&gt;item ' + i + '&lt;/li&gt;');
}

$myList.append(myItems.join(''));
</pre>
            </div>
            <div title="Manipulating Attributes" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Manipulating Attributes
                </h3>
              </div>
              <p>
                jQuery's attribute manipulation capabilities are extensive. Basic changes are simple, but the $.fn.attr method also allows for more complex manipulations. It can either set an explicit value, or set a value using the return value of a function. When the function syntax is used, the function receives two arguments: the zero-based index of the element whose attribute is being changed, and the current value of the attribute being changed.
              </p>
              <div class="example">
                <p class="title">
                  <b>Manipulating a single attribute</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('#myDiv a:first').attr('href', 'newDestination.html');
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Manipulating multiple attributes</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('#myDiv a:first').attr({
    href : 'newDestination.html',
    rel : 'super-special'
});
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Using a function to determine an attribute's new value</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('#myDiv a:first').attr({
    rel : 'super-special',
    href : function(idx, href) {
        return '/new/' + href;
    }
});

$('#myDiv a:first').attr('href', function(idx, href) {
    return '/new/' + href;
});
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Selecting" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Selecting
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/sandbox.js</code> or work in Firebug to accomplish the following:
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Select all of the div elements that have a class of "module".
                    </p>
                  </li>
                  <li>
                    <p>
                      Come up with three selectors that you could use to get the third item in the #myList unordered list. Which is the best to use? Why?
                    </p>
                  </li>
                  <li>
                    <p>
                      Select the label for the search input using an attribute selector.
                    </p>
                  </li>
                  <li>
                    <p>
                      Figure out how many elements on the page are hidden (hint: .length).
                    </p>
                  </li>
                  <li>
                    <p>
                      Figure out how many image elements on the page have an alt attribute.
                    </p>
                  </li>
                  <li>
                    <p>
                      Select all of the odd table rows in the table body.
                    </p>
                  </li>
                </ol>
              </div>
            </div>
            <div title="Traversing" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Traversing
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/sandbox.js</code> or work in Firebug to accomplish the following:
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Select all of the image elements on the page; log each image's alt attribute.
                    </p>
                  </li>
                  <li>
                    <p>
                      Select the search input text box, then traverse up to the form and add a class to the form.
                    </p>
                  </li>
                  <li>
                    <p>
                      Select the list item inside #myList that has a class of "current" and remove that class from it; add a class of "current" to the next list item.
                    </p>
                  </li>
                  <li>
                    <p>
                      Select the select element inside #specials; traverse your way to the submit button.
                    </p>
                  </li>
                  <li>
                    <p>
                      Select the first list item in the #slideshow element; add the class "current" to it, and then add a class of "disabled" to its sibling elements.
                    </p>
                  </li>
                </ol>
              </div>
            </div>
            <div title="Manipulating" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Manipulating
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/sandbox.js</code> or work in Firebug to accomplish the following:
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Add five new list items to the end of the unordered list #myList. Hint:
                    </p>
                    <pre class="programlisting">
for (var i = 0; i&lt;5; i++) { ... }
</pre>
                  </li>
                  <li>
                    <p>
                      Remove the odd list items
                    </p>
                  </li>
                  <li>
                    <p>
                      Add another h2 and another paragraph to the last div.module
                    </p>
                  </li>
                  <li>
                    <p>
                      Add another option to the select element; give the option the value "Wednesday"
                    </p>
                  </li>
                  <li>
                    <p>
                      Add a new div.module to the page after the last one; put a copy of one of the existing images inside of it.
                    </p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <div title="jQuery Core" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  jQuery Core
                </h2>
              </div>
            </div>
          </div>
          <div title="$ vs $()" class="section">
            <h2 class="title">
              <code class="code">$</code> vs <code class="code">$()</code>
            </h2>
            <p>
              Until now, we’ve been dealing entirely with methods that are called on a jQuery object. For example:
            </p>
            <pre class="programlisting">
$('h1').remove();
</pre>
            <p>
              Most jQuery methods are called on jQuery objects as shown above; these methods are said to be part of the <code class="code">$.fn</code> namespace, or the “jQuery prototype,” and are best thought of as jQuery object methods.
            </p>
            <p>
              However, there are several methods that do not act on a selection; these methods are said to be part of the jQuery namespace, and are best thought of as core jQuery methods.
            </p>
            <p>
              This distinction can be incredibly confusing to new jQuery users. Here’s what you need to remember:
            </p>
            <ul>
              <li>Methods called on jQuery selections are in the <code class="code">$.fn</code> namespace, and automatically receive and return the selection as this.
              </li>
              <li>Methods in the <code class="code">$</code> namespace are generally utility-type methods, and do not work with selections; they are not automatically passed any arguments, and their return value will vary.
              </li>
            </ul>
            <p>
              There are a few cases where object methods and core methods have the same names, such as <code class="code">$.each</code> and <code class="code">$.fn.each</code>. In these cases, be extremely careful when reading the documentation that you are exploring the correct method.
            </p>
          </div>
          <div title="Utility Methods" class="section">
            <h2 class="title">
              Utility Methods
            </h2>
            <p>
              jQuery offers several utility methods in the <code class="code">$</code> namespace. These methods are helpful for accomplishing routine programming tasks. Below are examples of a few of the utility methods; for a complete reference on jQuery utility methods, visit <a href="http://api.jquery.com/category/utilities/" class="ulink">http://api.jquery.com/category/utilities/</a>.
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">$.trim</span>
                </dt>
                <dd>
                  <p>
                    Removes leading and trailing whitespace.
                  </p>
                  <pre class="programlisting">
$.trim('    lots of extra whitespace    ');
// returns 'lots of extra whitespace'
</pre>
                </dd>
                <dt>
                  <span class="term">$.each</span>
                </dt>
                <dd>
                  <p>
                    Iterates over arrays and objects.
                  </p>
                  <pre class="programlisting">
$.each([ 'foo', 'bar', 'baz' ], function(idx, val) {
    console.log('element ' + idx + 'is ' + val);
});

$.each({ foo : 'bar', baz : 'bim' }, function(k, v) {
    console.log(k + ' : ' + v);
});
</pre>
                  <div class="note">
                  <h3 class="title">
                    Note
                  </h3>
                  <p>
                    There is also a method <code class="code">$.fn.each</code>, which is used for iterating over a selection of elements.
                  </p>
                  </div>
                </dd>
                <dt>
                  <span class="term">$.inArray</span>
                </dt>
                <dd>
                  <p>
                    Returns a value's index in an array, or -1 if the value is not in the array.
                  </p>
                  <pre class="programlisting">
var myArray = [ 1, 2, 3, 5 ];

if ($.inArray(4, myArray) !== -1) {
    console.log('found it!');
}
</pre>
                </dd>
                <dt>
                  <span class="term">$.extend</span>
                </dt>
                <dd>
                  <p>
                    Changes the properties of the first object using the properties of subsequent objects.
                  </p>
                  <pre class="programlisting">
var firstObject = { foo : 'bar', a : 'b' };
var secondObject = { foo : 'baz' };

var newObject = $.extend(firstObject, secondObject);
console.log(firstObject.foo); // 'baz'
console.log(newObject.foo);   // 'baz'
</pre>
                  <p>
                    If you don't want to change any of the objects you pass to <code class="code">$.extend</code>, pass an empty object as the first argument.
                  </p>
                  <pre class="programlisting">
var firstObject = { foo : 'bar', a : 'b' };
var secondObject = { foo : 'baz' };

var newObject = $.extend({}, firstObject, secondObject);
console.log(firstObject.foo); // 'bar'
console.log(newObject.foo);   // 'baz'
</pre>
                </dd>
                <dt>
                  <span class="term">$.proxy</span>
                </dt>
                <dd>
                  <p>
                    Returns a function that will always run in the provided scope — that is, sets the meaning of <code class="code">this</code> inside the passed function to the second argument.
                  </p>
                  <pre class="programlisting">
var myFunction = function() { console.log(this); };
var myObject = { foo : 'bar' };

myFunction(); // logs window object

var myProxyFunction = $.proxy(myFunction, myObject);
myProxyFunction(); // logs myObject object
</pre>
                  <p>
                    If you have an object with methods, you can pass the object and the name of a method to return a function that will always run in the scope of the object.
                  </p>
                  <pre class="programlisting">
var myObject = {
    myFn : function() {
        console.log(this);
    }
};

$('#foo').click(myObject.myFn); // logs DOM element #foo
$('#foo').click($.proxy(myObject, 'myFn')); // logs myObject
</pre>
                </dd>
              </dl>
            </div>
          </div>
          <div title="Checking types" class="section">
            <h2 class="title">
              Checking types
            </h2>
            <p>
              As mentioned in the "JavaScript basics" section, jQuery offers a few basic utility methods for determining the type of a specific value.
            </p>
            <div class="example">
              <p class="title">
                <b>Checking the type of an arbitrary value</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var myValue = [1, 2, 3];

// Using JavaScript's typeof operator to test for primative types
typeof myValue == 'string'; // false
typeof myValue == 'number'; // false
typeof myValue == 'undefined'; // false
typeof myValue == 'boolean'; // false

// Using strict equality operator to check for null
myValue === null; // false

// Using jQuery's methods to check for non-primative types
jQuery.isFunction(myValue); // false
jQuery.isPlainObject(myValue); // false
jQuery.isArray(myValue); // true
</pre>
              </div>
            </div>
          </div>
          <div title="Data Methods" class="section">
            <h2 class="title">
              Data Methods
            </h2>
            <p>
              As your work with jQuery progresses, you'll find that there's often data about an element that you want to store with the element. In plain JavaScript, you might do this by adding a property to the DOM element, but you'd have to deal with memory leaks in some browsers. jQuery offers a straightforward way to store data related to an element, and it manages the memory issues for you.
            </p>
            <div class="example">
              <p class="title">
                <b>Storing and retrieving data related to an element</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myDiv').data('keyName', { foo : 'bar' });
$('#myDiv').data('keyName'); // { foo : 'bar' }
</pre>
              </div>
            </div>
            <p>
              You can store any kind of data on an element, and it's hard to overstate the importance of this when you get into complex application development. For the purposes of this class, we'll mostly use <code class="code">$.fn.data</code> to store references to other elements.
            </p>
            <p>
              For example, we may want to establish a relationship between a list item and a div that's inside of it. We could establish this relationship every single time we interact with the list item, but a better solution would be to establish the relationship once, and then store a pointer to the div on the list item using <code class="code">$.fn.data</code>:
            </p>
            <div class="example">
              <p class="title">
                <b>Storing a relationship between elements using <code class="code">$.fn.data</code></b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myList li').each(function() {
    var $li = $(this), $div = $li.find('div.content');
    $li.data('contentDiv', $div);
});

// later, we don't have to find the div again;
// we can just read it from the list item's data
var $firstLi = $('#myList li:first');
$firstLi.data('contentDiv').html('new content');
</pre>
              </div>
            </div>
            <p>
              In addition to passing <code class="code">$.fn.data</code> a single key-value pair to store data, you can also pass an object containing one or more pairs.
            </p>
          </div>
          <div title="Feature &amp; Browser Detection" class="section">
            <h2 class="title">
              Feature &amp; Browser Detection
            </h2>
            <p>
              Although jQuery eliminates most JavaScript browser quirks, there are still occasions when your code needs to know about the browser environment.
            </p>
            <p>
              jQuery offers the <code class="code">$.support</code> object, as well as the deprecated <code class="code">$.browser</code> object, for this purpose. For complete documentation on these objects, visit <a href="http://api.jquery.com/jQuery.support/" class="ulink">http://api.jquery.com/jQuery.support/</a> and <a href="http://api.jquery.com/jQuery.browser/" class="ulink">http://api.jquery.com/jQuery.browser/</a>.
            </p>
            <p>
              The <code class="code">$.support</code> object is dedicated to determining what features a browser supports; it is recommended as a more “future-proof” method of customizing your JavaScript for different browser environments.
            </p>
            <p>
              The <code class="code">$.browser</code> object was deprecated in favor of the <code class="code">$.support</code> object, but it will not be removed from jQuery anytime soon. It provides direct detection of the browser brand and version.
            </p>
          </div>
          <div title="Avoiding Conflicts with Other Libraries" class="section">
            <h2 class="title">
              Avoiding Conflicts with Other Libraries
            </h2>
            <p>
              If you are using another JavaScript library that uses the <code class="code">$</code> variable, you can run into conflicts with jQuery. In order to avoid these conflicts, you need to put jQuery in no-conflict mode immediately after it is loaded onto the page and before you attempt to use jQuery in your page.
            </p>
            <p>
              When you put jQuery into no-conflict mode, you have the option of assigning a variable name to replace <code class="code">$</code>.
            </p>
            <div class="example">
              <p class="title">
                <b>Putting jQuery into no-conflict mode</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
&lt;script src="prototype.js"&gt;&lt;/script&gt;
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script&gt;var $j = jQuery.noConflict();&lt;/script&gt;
</pre>
              </div>
            </div>
            <p>
              You can continue to use the standard <code class="code">$</code> by wrapping your code in a self-executing anonymous function; this is a standard pattern for plugin authoring, where the author cannot know whether another library will have taken over the <code class="code">$</code>.
            </p>
            <div class="example">
              <p class="title">
                <b>Using the $ inside a self-executing anonymous function</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
&lt;script src="prototype.js"&gt;&lt;/script&gt;
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script&gt;
jQuery.noConflict();

(function($) {
   // your code here, using the $
})(jQuery);
&lt;/script&gt;
</pre>
              </div>
            </div>
          </div>
        </div>
        <div title="Events" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Events
                </h2>
              </div>
            </div>
          </div>
          <div title="Overview" class="section">
            <h2 class="title">
              Overview
            </h2>
            <p>
              jQuery provides simple methods for attaching event handlers to selections. When an event occurs, the provided function is executed. Inside the function, this refers to the element that was clicked.
            </p>
            <p>
              For details on jQuery events, visit <a href="http://api.jquery.com/category/events/" class="ulink">http://api.jquery.com/category/events/</a>.
            </p>
            <p>
              The event handling function can receive an event object. This object can be used to determine the nature of the event, and to prevent the event’s default behavior.
            </p>
            <p>
              For details on the event object, visit <a href="http://api.jquery.com/category/events/event-object/" class="ulink">http://api.jquery.com/category/events/event-object/</a>.
            </p>
          </div>
          <div title="Connecting Events to Elements" class="section">
            <h2 class="title">
              Connecting Events to Elements
            </h2>
            <p>
              jQuery offers convenience methods for most common events, and these are the methods you will see used most often. These methods -- including <code class="code">$.fn.click</code>, <code class="code">$.fn.focus</code>, <code class="code">$.fn.blur</code>, <code class="code">$.fn.change</code>, etc. -- are shorthand for jQuery's <code class="code">$.fn.bind</code> method. The bind method is useful for binding the same handler function to multiple events, and is also used when you want to provide data to the event hander, or when you are working with custom events.
            </p>
            <div class="example">
              <p class="title">
                <b>Event binding using a convenience method</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('p').click(function() {
    console.log('click');
});
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Event biding using the <code class="code">$.fn.bind</code> method</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('p').bind('click', function() {
    console.log('click');
});
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Event binding using the <code class="code">$.fn.bind</code> method with data</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('input').bind(
    'click change',  // bind to multiple events
    { foo : 'bar' }, // pass in data

    function(eventObject) {
        console.log(eventObject.type, eventObject.data);
        // logs event type, then { foo : 'bar' }
    }
);
</pre>
              </div>
            </div>
            <div title="Connecting Events to Run Only Once" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Connecting Events to Run Only Once
                </h3>
              </div>
              <p>
                Sometimes you need a particular handler to run only once -- after that, you may want no handler to run, or you may want a different handler to run. jQuery provides the <code class="code">$.fn.one</code> method for this purpose.
              </p>
              <div class="example">
                <p class="title">
                  <b>Switching handlers using the <code class="code">$.fn.one</code> method</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('p').one('click', function() {
    console.log('You just clicked this for the first time!');
    $(this).click(function() { console.log('You have clicked this before!'); });
});
</pre>
                </div>
              </div>
              <p>
                The <code class="code">$.fn.one</code> method is especially useful if you need to do some complicated setup the first time an element is clicked, but not subsequent times.
              </p>
            </div>
            <div title="Disconnecting Events" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Disconnecting Events
                </h3>
              </div>
              <p>
                To disconnect an event handler, you use the <code class="code">$.fn.unbind</code> method and pass in the event type to unbind. If you attached a named function to the event, then you can isolate the unbinding to that named function by passing it as the second argument.
              </p>
              <div class="example">
                <p class="title">
                  <b>Unbinding all click handlers on a selection</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('p').unbind('click');
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Unbinding a particular click handler</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var foo = function() { console.log('foo'); };
var bar = function() { console.log('bar'); };

$('p').bind('click', foo).bind('click', bar);
$('p').unbind('click', bar); // foo is still bound to the click event
</pre>
                </div>
              </div>
            </div>
            <div title="Namespacing Events" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Namespacing Events
                </h3>
              </div>
              <p>
                For complex applications and for plugins you share with others, it can be useful to namespace your events so you don't unintentionally disconnect events that you didn't or couldn't know about.
              </p>
              <div class="example">
                <p class="title">
                  <b>Namespacing events</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('p').bind('click.myNamespace', function() { /* ... */ });
$('p').unbind('click.myNamespace');
$('p').unbind('.myNamespace'); // unbind all events in the namespace
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Inside the Event Handling Function" class="section">
            <h2 class="title">
              Inside the Event Handling Function
            </h2>
            <p>
              As mentioned in the overview, the event handling function receives an event object, which contains many properties and methods. The event object is most commonly used to prevent the default action of the event via the preventDefault method. However, the event object contains a number of other useful properties and methods, including:
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">pageX, pageY</span>
                </dt>
                <dd>
                  <p>
                    The mouse position at the time the event occurred, relative to the top left of the page.
                  </p>
                </dd>
                <dt>
                  <span class="term">type</span>
                </dt>
                <dd>
                  <p>
                    The type of the event (e.g. "click").
                  </p>
                </dd>
                <dt>
                  <span class="term">which</span>
                </dt>
                <dd>
                  <p>
                    The button or key that was pressed.
                  </p>
                </dd>
                <dt>
                  <span class="term">data</span>
                </dt>
                <dd>
                  <p>
                    Any data that was passed in when the event was bound.
                  </p>
                </dd>
                <dt>
                  <span class="term">target</span>
                </dt>
                <dd>
                  <p>
                    The DOM element that initiated the event.
                  </p>
                </dd>
                <dt>
                  <span class="term">preventDefault()</span>
                </dt>
                <dd>
                  <p>
                    Prevent the default action of the event (e.g. following a link).
                  </p>
                </dd>
                <dt>
                  <span class="term">stopPropagation()</span>
                </dt>
                <dd>
                  <p>
                    Stop the event from bubbling up to other elements.
                  </p>
                </dd>
              </dl>
            </div>
            <p>
              In addition to the event object, the event handling function also has access to the DOM element that the handler was bound to via the keyword <code class="code">this</code>. To turn the DOM element into a jQuery object that we can use jQuery methods on, we simply do <code class="code">$(this)</code>, often following this idiom:
            </p>
            <pre class="programlisting">
var $this = $(this);
</pre>
            <div class="example">
              <p class="title">
                <b>Preventing a link from being followed</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('a').click(function(e) {
    var $this = $(this);
    if ($this.attr('href').match('evil')) {
        e.preventDefault();
        $this.addClass('evil');
    }
});
</pre>
              </div>
            </div>
          </div>
          <div title="Triggering Event Handlers" class="section">
            <h2 class="title">
              Triggering Event Handlers
            </h2>
            <p>
              jQuery provides a way to trigger the event handlers bound to an element without any user interaction via the <code class="code">$.fn.trigger</code> method. While this method has its uses, it should not be used simply to call a function that was bound as a click handler. Instead, you should store the function you want to call in a variable, and pass the variable name when you do your binding. Then, you can call the function itself whenever you want, without the need for <code class="code">$.fn.trigger</code>.
            </p>
            <div class="example">
              <p class="title">
                <b>Triggering an event handler the right way</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var foo = function(e) {
    if (e) {
        console.log(e);
    } else {
        console.log('this didn\'t come from an event!');
    }
};


$('p').click(foo);

foo(); // instead of $('p').trigger('click')
</pre>
              </div>
            </div>
          </div>
          <h2 class="title">
            Increasing Performance with Event Delegation
          </h2>
          <p>
            You'll frequently use jQuery to add new elements to the page, and when you do, you may need to bind events to those new elements -- events you already bound to similar elements that were on the page originally. Instead of repeating your event binding every time you add elements to the page, you can use event delegation. With event delegation, you bind your event to a container element, and then when the event occurs, you look to see which contained element it occurred on. If this sounds complicated, luckily jQuery makes it easy with its <code class="code">$.fn.live</code> and <code class="code">$.fn.delegate</code> methods.
          </p>
          <p>
            While most people discover event delegation while dealing with elements added to the page later, it has some performance benefits even if you never add more elements to the page. The time required to bind event handlers to hundreds of individual elements is non-trivial; if you have a large set of elements, you should consider delegating related events to a container element.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            The <code class="code">$.fn.live</code> method was introduced in jQuery 1.3, and at that time only certain event types were supported. As of jQuery 1.4.2, the <code class="code">$.fn.delegate</code> method is available, and is the preferred method.
          </p>
          </div>
          <div class="example">
            <p class="title">
              <b>Event delegation using <code class="code">$.fn.delegate</code></b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('#myUnorderedList').delegate('li', 'click', function(e) {
    var $myListItem = $(this);
    // ...
});
</pre>
            </div>
          </div>
          <div class="example">
            <p class="title">
              <b>Event delegation using <code class="code">$.fn.live</code></b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('#myUnorderedList li').live('click', function(e) {
    var $myListItem = $(this);
    // ...
});
</pre>
            </div>
          </div>
          <div title="Unbinding Delegated Events" class="section">
            <div class="titlepage">
              <h3 class="title">
                Unbinding Delegated Events
              </h3>
            </div>
            <p>
              If you need to remove delegated events, you can't simply unbind them. Instead, use <code class="code">$.fn.undelegate</code> for events connected with <code class="code">$.fn.delegate</code>, and <code class="code">$.fn.die</code> for events connected with <code class="code">$.fn.live</code>. As with bind, you can optionally pass in the name of the bound function.
            </p>
            <div class="example">
              <p class="title">
                <b>Unbinding delegated events</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myUnorderedList').undelegate('li', 'click');
$('#myUnorderedList li').die('click');
</pre>
              </div>
            </div>
          </div>
          <div title="Event Helpers" class="section">
            <h2 class="title">
              Event Helpers
            </h2>
            <p>
              jQuery offers two event-related helper functions that save you a few keystrokes.
            </p>
            <div class="titlepage">
              <h3 class="title">
                <code class="code">$.fn.hover</code>
              </h3>
            </div>
            <p>
              The <code class="code">$.fn.hover</code> method lets you pass one or two functions to be run when the <code class="code">mouseenter</code> and <code class="code">mouseleave</code> events occur on an element. If you pass one function, it will be run for both events; if you pass two functions, the first will run for <code class="code">mouseenter</code>, and the second will run for <code class="code">mouseleave</code>.
            </p>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              Prior to jQuery 1.4, the <code class="code">$.fn.hover</code> method required two functions.
            </p>
            </div>
            <div class="example">
              <p class="title">
                <b>The hover helper function</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#menu li').hover(function() {
    $(this).toggleClass('hover');
});
</pre>
              </div>
            </div>
            <div title="$.fn.toggle" class="section">
              <div class="titlepage">
                <h3 class="title">
                  <code class="code">$.fn.toggle</code>
                </h3>
              </div>
              <p>
                Much like <code class="code">$.fn.hover</code>, the <code class="code">$.fn.toggle</code> method receives two or more functions; each time the event occurs, the next function in the list is called. Generally, <code class="code">$.fn.toggle</code> is used with just two functions, but technically you can use as many as you'd like.
              </p>
              <div class="example">
                <p class="title">
                  <b>The toggle helper function</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('p.expander').toggle(
    function() {
        $(this).prev().addClass('open');
    },
    function() {
        $(this).prev().removeClass('open');
    }
);
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Create an Input Hint" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Create an Input Hint
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/inputHint.js</code> or work in Firebug. Your task is to use the text of the label for the search input to create "hint" text for the search input. The steps are as follows:
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Set the value of the search input to the text of the label element
                    </p>
                  </li>
                  <li>
                    <p>
                      Add a class of "hint" to the search input
                    </p>
                  </li>
                  <li>
                    <p>
                      Remove the label element
                    </p>
                  </li>
                  <li>
                    <p>
                      Bind a focus event to the search input that removes the hint text and the "hint" class
                    </p>
                  </li>
                  <li>
                    <p>
                      Bind a blur event to the search input that restores the hint text and "hint" class if no search text was entered
                    </p>
                  </li>
                </ol>
              </div>
              <p>
                What other considerations might there be if you were creating this functionality for a real site?
              </p>
            </div>
            <div title="Add Tabbed Navigation" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Add Tabbed Navigation
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/tabs.js</code>. Your task is to create tabbed navigation for the two div.module elements. To accomplish this:
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Hide all of the modules.
                    </p>
                  </li>
                  <li>
                    <p>
                      Create an unordered list element before the first module.
                    </p>
                  </li>
                  <li>Iterate over the modules using <code class="code">$.fn.each</code>. For each module, use the text of the h2 element as the text for a list item that you add to the unordered list element.
                  </li>
                  <li>
                    <p>
                      Bind a click event to the list item that:
                    </p>
                    <ul>
                      <li>
                        <p>
                          Shows the related module, and hides any other modules
                        </p>
                      </li>
                      <li>
                        <p>
                          Adds a class of "current" to the clicked list item
                        </p>
                      </li>
                      <li>
                        <p>
                          Removes the class "current" from the other list item
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <p>
                      Finally, show the first tab.
                    </p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <div title="Effects" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Effects
                </h2>
              </div>
            </div>
          </div>
          <div title="Overview" class="section">
            <h2 class="title">
              Overview
            </h2>
            <p>
              jQuery makes it trivial to add simple effects to your page. Effects can use the built-in settings, or provide a customized duration. You can also create custom animations of arbitrary CSS properties.
            </p>
            <p>
              For complete details on jQuery effects, visit <a href="http://api.jquery.com/category/effects/" class="ulink">http://api.jquery.com/category/effects/</a>.
            </p>
          </div>
          <div title="Built-in Effects" class="section">
            <h2 class="title">
              Built-in Effects
            </h2>
            <p>
              Frequently used effects are built into jQuery as methods:
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">$.fn.show</span>
                </dt>
                <dd>
                  <p>
                    Show the selected element.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.hide</span>
                </dt>
                <dd>
                  <p>
                    Hide the selected elements.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.fadeIn</span>
                </dt>
                <dd>
                  <p>
                    Animate the opacity of the selected elements to 100%.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.fadeOut</span>
                </dt>
                <dd>
                  <p>
                    Animate the opacity of the selected elements to 0%.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.slideDown</span>
                </dt>
                <dd>
                  <p>
                    Display the selected elements with a vertical sliding motion.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.slideUp</span>
                </dt>
                <dd>
                  <p>
                    Hide the selected elements with a vertical sliding motion.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.slideToggle</span>
                </dt>
                <dd>
                  <p>
                    Show or hide the selected elements with a vertical sliding motion, depending on whether the elements are currently visible.
                  </p>
                </dd>
              </dl>
            </div>
            <div class="example">
              <p class="title">
                <b>A basic use of a built-in effect</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('h1').show();
</pre>
              </div>
            </div>
            <div title="Changing the Duration of Built-in Effects" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Changing the Duration of Built-in Effects
                </h3>
              </div>
              <p>
                With the exception of <code class="code">$.fn.show</code> and <code class="code">$.fn.hide</code>, all of the built-in methods are animated over the course of 400ms by default. Changing the duration of an effect is simple.
              </p>
              <div class="example">
                <p class="title">
                  <b>Setting the duration of an effect</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('h1').fadeIn(300);      // fade in over 300ms
$('h1').fadeOut('slow');  // using a built-in speed definition
</pre>
                </div>
              </div>
              <div title="jQuery.fx.speeds" class="section">
                <div class="titlepage">
                  <h4 class="title">
                    jQuery.fx.speeds
                  </h4>
                </div>
                <p>
                  jQuery has an object at <code class="code">jQuery.fx.speeds</code> that contains the default speed, as well as settings for <code class="code">"slow"</code> and <code class="code">"fast"</code>.
                </p>
                <pre class="programlisting">
speeds: {
    slow: 600,
    fast: 200,
    // Default speed
    _default: 400
}
</pre>
                <p>
                  It is possible to override or add to this object. For example, you may want to change the default duration of effects, or you may want to create your own effects speed.
                </p>
                <div class="example">
                  <p class="title">
                    <b>Augmenting <code class="code">jQuery.fx.speeds</code> with custom speed definitions</b>
                  </p>
                  <div class="example-contents">
                    <pre class="programlisting">
jQuery.fx.speeds.blazing = 100;
jQuery.fx.speeds.turtle = 2000;
</pre>
                  </div>
                </div>
              </div>
            </div>
            <div title="Doing Something when an Effect is Done" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Doing Something when an Effect is Done
                </h3>
              </div>
              <p>
                Often, you'll want to run some code once an animation is done -- if you run it before the animation is done, it may affect the quality of the animation, or it may remove elements that are part of the animation. <span class="termdef">[Definition: <em class="firstterm">Callback functions</em> provide a way to register your interest in an event that will happen in the future.]</span> In this case, the event we'll be responding to is the conclusion of the animation. Inside of the callback function, the keyword <code class="code">this</code> refers to the element that the effect was called on; as we did inside of event handler functions, we can turn it into a jQuery object via <code class="code">$(this)</code>.
              </p>
              <div class="example">
                <p class="title">
                  <b>Running code when an animation is complete</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('div.old').fadeOut(300, function() { $(this).remove(); });
</pre>
                </div>
              </div>
              <p>
                Note that if your selection doesn't return any elements, your callback will never run! You can solve this problem by testing whether your selection returned any elements; if not, you can just run the callback immediately.
              </p>
              <div class="example">
                <p class="title">
                  <b>Run a callback even if there were no elements to animate</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var $thing = $('#nonexistent');

var cb = function() {
    console.log('done!');
};

if ($thing.length) {
    $thing.fadeIn(300, cb);
} else {
    cb();
}
</pre>
                </div>
              </div>
            </div>
          </div>
          <h2 class="title">
            Custom Effects with <code class="code">$.fn.animate</code>
          </h2>
          <p>
            jQuery makes it possible to animate arbitrary CSS properties via the <code class="code">$.fn.animate</code> method. The <code class="code">$.fn.animate</code> method lets you animate to a set value, or to a value relative to the current value.
          </p>
          <div class="example">
            <p class="title">
              <b>Custom effects with <code class="code">$.fn.animate</code></b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$('div.funtimes').animate(
    {
        left : "+=50",
        opacity : 0.25
    },
    300, // duration
    function() { console.log('done!'); // calback
});
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            Color-related properties cannot be animated with <code class="code">$.fn.animate</code> using jQuery out of the box. Color animations can easily be accomplished by including the <a href="http://plugins.jquery.com/files/jquery.color.js.txt" class="ulink">color plugin</a>. We'll discuss using plugins later in the book.
          </p>
          </div>
          <div title="Easing" class="section">
            <div class="titlepage">
              <h3 class="title">
                Easing
              </h3>
            </div>
            <p>
              <span class="termdef">[Definition: <em class="firstterm">Easing</em> describes the manner in which an effect occurs -- whether the rate of change is steady, or varies over the duration of the animation.]</span> jQuery includes only two methods of easing: swing and linear. If you want more natural transitions in your animations, various easing plugins are available.
            </p>
            <p>
              As of jQuery 1.4, it is possible to do per-property easing when using the $.fn.animate method.
            </p>
            <div class="example">
              <p class="title">
                <b>Per-property easing</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('div.funtimes').animate(
    {
        left : [ "+=50", "swing" ],
        opacity : [ 0.25, "linear" ]
    },
    300
);
</pre>
              </div>
            </div>
            <p>
              For more details on easing options, see <a href="http://api.jquery.com/animate/" class="ulink">http://api.jquery.com/animate/</a>.
            </p>
          </div>
          <div title="Managing Effects" class="section">
            <h2 class="title">
              Managing Effects
            </h2>
            <p>
              jQuery provides several tools for managing animations.
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">$.fn.stop</span>
                </dt>
                <dd>
                  <p>
                    Stop currently running animations on the selected elements.
                  </p>
                </dd>
                <dt>
                  <span class="term">$.fn.delay</span>
                </dt>
                <dd>
                  <p>
                    Wait the specified number of milliseconds before running the next animation.
                  </p>
                  <pre class="programlisting">
$('h1').show(300).delay(1000).hide(300);
</pre>
                </dd>
                <dt>
                  <span class="term">jQuery.fx.off</span>
                </dt>
                <dd>
                  <p>
                    If this value is true, there will be no transition for animations; elements will immediately be set to the target final state instead. This can be especially useful when dealing with older browsers; you also may want to provide the option to your users.
                  </p>
                </dd>
              </dl>
            </div>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Reveal Hidden Text" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Reveal Hidden Text
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/blog.js</code>. Your task is to add some interactivity to the blog section of the page. The spec for the feature is as follows:
              </p>
              <ul>
                <li>
                  <p>
                    Clicking on a headline in the #blog div should slide down the excerpt paragraph
                  </p>
                </li>
                <li>
                  <p>
                    Clicking on another headline should slide down its excerpt paragraph, and slide up any other currently showing excerpt paragraphs.
                  </p>
                </li>
              </ul>
              <p>
                Hint: don't forget about the <code class="code">:visible</code> selector!
              </p>
            </div>
            <div title="Create Dropdown Menus" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Create Dropdown Menus
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/navigation.js</code>. Your task is to add dropdowns to the main navigation at the top of the page.
              </p>
              <ul>
                <li>
                  <p>
                    Hovering over an item in the main menu should show that item's submenu items, if any.
                  </p>
                </li>
                <li>
                  <p>
                    Exiting an item should hide any submenu items.
                  </p>
                </li>
              </ul>
              <p>
                To accomplish this, use the <code class="code">$.fn.hover</code> method to add and remove a class from the submenu items to control whether they're visible or hidden. (The file at <code class="filename">/exercises/css/styles.css</code> includes the "hover" class for this purpose.)
              </p>
            </div>
            <div title="Create a Slideshow" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Create a Slideshow
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/slideshow.js</code>. Your task is to take a plain semantic HTML page and enhance it with JavaScript by adding a slideshow.
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Move the #slideshow element to the top of the body.
                    </p>
                  </li>
                  <li>
                    <p>
                      Write code to cycle through the list items inside the element; fade one in, display it for a few seconds, then fade it out and fade in the next one.
                    </p>
                  </li>
                  <li>
                    <p>
                      When you get to the end of the list, start again at the beginning.
                    </p>
                  </li>
                </ol>
              </div>
              <p>
                For an extra challenge, create a navigation area under the slideshow that shows how many images there are and which image you're currently viewing. (Hint: $.fn.prevAll will come in handy for this.)
              </p>
            </div>
          </div>
        </div>
        <div title="Ajax" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Ajax
                </h2>
              </div>
            </div>
          </div>
          <div title="Overview" class="section">
            <h2 class="title">
              Overview
            </h2>
            <p>
              The XMLHttpRequest method (XHR) allows browsers to communicate with the server without requiring a page reload. This method, also known as Ajax (Asynchronous JavaScript and XML), allows for web pages that provide rich, interactive experiences.
            </p>
            <p>
              Ajax requests are triggered by JavaScript code; your code sends a request to a URL, and when it receives a response, a callback function can be triggered to handle the response. Because the request is asynchronous, the rest of your code continues to execute while the request is being processed, so it’s imperative that a callback be used to handle the response.
            </p>
            <p>
              jQuery provides Ajax support that abstracts away painful browser differences. It offers both a full-featured <code class="code">$.ajax()</code> method, and simple convenience methods such as <code class="code">$.get()</code>, <code class="code">$.getScript()</code>, <code class="code">$.getJSON()</code>, <code class="code">$.post()</code>, and <code class="code">$().load()</code>.
            </p>
            <p>
              Most jQuery applications don’t in fact use XML, despite the name “Ajax”; instead, they transport data as plain HTML or JSON (JavaScript Object Notation).
            </p>
            <p>
              In general, Ajax does not work across domains. Exceptions are services that provide JSONP (JSON with Padding) support, which allow limited cross-domain functionality.
            </p>
          </div>
          <div title="Key Concepts" class="section">
            <h2 class="title">
              Key Concepts
            </h2>
            <p>
              Proper use of Ajax-related jQuery methods requires understanding some key concepts first.
            </p>
            <div title="GET vs. Post" class="section">
              <div class="titlepage">
                <h3 class="title">
                  GET vs. Post
                </h3>
              </div>
              <p>
                The two most common “methods” for sending a request to a server are GET and POST. It’s important to understand the proper application of each.
              </p>
              <p>
                The GET method should be used for non-destructive operations — that is, operations where you are only “getting” data from the server, not changing data on the server. For example, a query to a search service might be a GET request. GET requests may be cached by the browser, which can lead to unpredictable behavior if you are not expecting it. GET requests generally send all of their data in a query string.
              </p>
              <p>
                The POST method should be used for destructive operations — that is, operations where you are changing data on the server. For example, a user saving a blog post should be a POST request. POST requests are generally not cached by the browser; a query string can be part of the URL, but the data tends to be sent separately as post data.
              </p>
            </div>
            <div title="Data Types" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Data Types
                </h3>
              </div>
              <p>
                jQuery generally requires some instruction as to the type of data you expect to get back from an Ajax request; in some cases the data type is specified by the method name, and in other cases it is provided as part of a configuration object. There are several options:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">text</span>
                  </dt>
                  <dd>
                    <p>
                      For transporting simple strings
                    </p>
                  </dd>
                  <dt>
                    <span class="term">html</span>
                  </dt>
                  <dd>
                    <p>
                      For transporting blocks of HTML to be placed on the page
                    </p>
                  </dd>
                  <dt>
                    <span class="term">script</span>
                  </dt>
                  <dd>
                    <p>
                      For adding a new script to the page
                    </p>
                  </dd>
                  <dt>
                    <span class="term">json</span>
                  </dt>
                  <dd>
                    <p>
                      For transporting JSON-formatted data, which can include strings, arrays, and objects
                    </p>
                    <div class="note">
                    <h3 class="title">
                      Note
                    </h3>
                    <p>
                      As of jQuery 1.4, if the JSON data sent by your server isn't properly formatted, the request may fail silently. See <a href="http://json.org" class="ulink">http://json.org</a> for details on properly formatting JSON, but as a general rule, use built-in language methods for generating JSON on the server to avoid syntax issues.
                    </p>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">jsonp</span>
                  </dt>
                  <dd>
                    <p>
                      For transporting JSON data from another domain
                    </p>
                  </dd>
                  <dt>
                    <span class="term">xml</span>
                  </dt>
                  <dd>
                    <p>
                      For transporting data in a custom XML schema
                    </p>
                  </dd>
                </dl>
              </div>
              <p class="remark">
                <i><span class="remark">I am a strong proponent of using the JSON format in most cases, as it provides the most flexibility. It is especially useful for sending both HTML and data at the same time.</span></i>
              </p>
            </div>
            <div title="A is for Asynchronous" class="section">
              <div class="titlepage">
                <h3 class="title">
                  A is for Asynchronous
                </h3>
              </div>
              <p>
                The asynchronicity of Ajax catches many new jQuery users off guard. Because Ajax calls are asynchronous by default, the response is not immediately available. Responses can only be handled using a callback. So, for example, the following code will not work:
              </p>
              <pre class="programlisting">
var response;
$.get('foo.php', function(r) { response = r; });
console.log(response); <span class="emphasis"><em>// undefined!</em></span>
</pre>
              <p>
                Instead, we need to pass a callback function to our request; this callback will run when the request succeeds, at which point we can access the data that it returned, if any.
              </p>
              <pre class="programlisting">
$.get('foo.php', function(response) { console.log(response); });
</pre>
            </div>
            <div title="Same-Origin Policy and JSONP" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Same-Origin Policy and JSONP
                </h3>
              </div>
              <p>
                In general, Ajax requests are limited to the same protocol (http or https), the same port, and the same domain as the page making the request. This limitation does not apply to scripts that are loaded via jQuery's Ajax methods.
              </p>
              <p>
                The other exception is requests targeted at a JSONP service on another domain. In the case of JSONP, the provider of the service has agreed to respond to your request with a script that can be loaded into the page using a <code class="code">&lt;script&gt;</code> tag, thus avoiding the same-origin limitation; that script will include the data you requested, wrapped in a callback function you provide.
              </p>
            </div>
            <div title="Ajax and Firebug" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Ajax and Firebug
                </h3>
              </div>
              <p>
                Firebug (or the Webkit Inspector in Chrome or Safari) is an invaluable tool for working with Ajax requests. You can see Ajax requests as they happen in the Console tab of Firebug (and in the Resources &gt; XHR panel of Webkit Inspector), and you can click on a request to expand it and see details such as the request headers, response headers, response content, and more. If something isn't going as expected with an Ajax request, this is the first place to look to track down what's wrong.
              </p>
            </div>
          </div>
          <div title="jQuery's Ajax-Related Methods" class="section">
            <h2 class="title">
              jQuery's Ajax-Related Methods
            </h2>
            <p>
              While jQuery does offer many Ajax-related convenience methods, the core <code class="code">$.ajax</code> method is at the heart of all of them, and understanding it is imperative. We'll review it first, and then touch briefly on the convenience methods.
            </p>
            <p class="remark">
              <i><span class="remark">I generally use the $.ajax method and do not use convenience methods. As you'll see, it offers features that the convenience methods do not, and its syntax is more easily understandable, in my opinion.</span></i>
            </p>
            <div class="titlepage">
              <h3 class="title">
                $.ajax
              </h3>
            </div>
            <p>
              jQuery’s core <code class="code">$.ajax</code> method is a powerful and straightforward way of creating Ajax requests. It takes a configuration object that contains all the instructions jQuery requires to complete the request. The <code class="code">$.ajax</code> method is particularly valuable because it offers the ability to specify both success and failure callbacks. Also, its ability to take a configuration object that can be defined separately makes it easier to write reusable code. For complete documentation of the configuration options, visit <a href="http://api.jquery.com/jQuery.ajax/" class="ulink">http://api.jquery.com/jQuery.ajax/</a>.
            </p>
            <div class="example">
              <p class="title">
                <b>Using the core $.ajax method</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$.ajax({
    // the URL for the request
    url : 'post.php',

    // the data to send
    // (will be converted to a query string)
    data : { id : 123 },

    // whether this is a POST or GET request
    type : 'GET',

    // the type of data we expect back
    dataType : 'json',

    // code to run if the request succeeds;
    // the response is passed to the function
    success : function(json) {
        $('&lt;h1/&gt;').text(json.title).appendTo('body');
        $('&lt;div class="content"/&gt;')
            .html(json.html).appendTo('body');
    },

    // code to run if the request fails;
    // the raw request and status codes are
    // passed to the function
    error : function(xhr, status) {
        alert('Sorry, there was a problem!');
    },

    // code to run regardless of success or failure
    complete : function(xhr, status) {
        alert('The request is complete!');
    }
});
</pre>
              </div>
            </div>
            <div class="note">
            <h3 class="title">
              Note
            </h3>
            <p>
              A note about the <code class="code">dataType</code> setting: if the server sends back data that is in a different format than you specify, your code may fail, and the reason will not always be clear, because the HTTP response code will not show an error. When working with Ajax requests, make sure your server is sending back the data type you're asking for, and verify that the Content-type header is accurate for the data type. For example, for JSON data, the Content-type header should be <code class="code">application/json</code>.
            </p>
            </div>
            <div title="$.ajax Options" class="section">
              <div class="titlepage">
                <h4 class="title">
                  <code class="code">$.ajax</code> Options
                </h4>
              </div>
              <p>
                There are many, many options for the $.ajax method, which is part of its power. For a complete list of options, visit <a href="http://api.jquery.com/jQuery.ajax/" class="ulink">http://api.jquery.com/jQuery.ajax/</a>; here are several that you will use frequently:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">async</span>
                  </dt>
                  <dd>
                    <p>
                      Set to <code class="code">false</code> if the request should be sent synchronously. Defaults to <code class="code">true</code>. Note that if you set this option to false, your request will block execution of other code until the response is received.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">cache</span>
                  </dt>
                  <dd>
                    <p>
                      Whether to use a cached response if available. Defaults to <code class="code">true</code> for all dataTypes except "script" and "jsonp". When set to false, the URL will simply have a cachebusting parameter appended to it.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">complete</span>
                  </dt>
                  <dd>
                    <p>
                      A callback function to run when the request is complete, regardless of success or failure. The function receives the raw request object and the text status of the request.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">context</span>
                  </dt>
                  <dd>
                    <p>
                      The scope in which the callback function(s) should run (i.e. what <code class="code">this</code> will mean inside the callback function(s)). By default, <code class="code">this</code> inside the callback function(s) refers to the object originally passed to <code class="code">$.ajax</code>.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">data</span>
                  </dt>
                  <dd>
                    <p>
                      The data to be sent to the server. This can either be an object or a query string, such as <code class="code">foo=bar&amp;baz=bim</code>.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">dataType</span>
                  </dt>
                  <dd>
                    <p>
                      The type of data you expect back from the server. By default, jQuery will look at the MIME type of the response if no dataType is specified.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">error</span>
                  </dt>
                  <dd>
                    <p>
                      A callback function to run if the request results in an error. The function receives the raw request object and the text status of the request.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">jsonp</span>
                  </dt>
                  <dd>
                    <p>
                      The callback name to send in a query string when making a JSONP request. Defaults to "callback".
                    </p>
                  </dd>
                  <dt>
                    <span class="term">success</span>
                  </dt>
                  <dd>
                    <p>
                      A callback function to run if the request succeeds. The function receives the response data (converted to a JavaScript object if the dataType was JSON), as well as the text status of the request and the raw request object.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">timeout</span>
                  </dt>
                  <dd>
                    <p>
                      The time in milliseconds to wait before considering the request a failure.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">traditional</span>
                  </dt>
                  <dd>
                    <p>
                      Set to true to use the param serialization style in use prior to jQuery 1.4. For details, see <a href="http://api.jquery.com/jQuery.param/" class="ulink">http://api.jquery.com/jQuery.param/</a>.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">type</span>
                  </dt>
                  <dd>
                    <p>
                      The type of the request, "POST" or "GET". Defaults to "GET". Other request types, such as "PUT" and "DELETE" can be used, but they may not be supported by all browsers.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">url</span>
                  </dt>
                  <dd>
                    <p>
                      The URL for the request.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                The <code class="code">url</code> option is the only required property of the <code class="code">$.ajax</code> configuration object; all other properties are optional.
              </p>
            </div>
            <div title="Convenience Methods" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Convenience Methods
                </h3>
              </div>
              <p>
                If you don't need the extensive configurability of <code class="code">$.ajax</code>, and you don't care about handling errors, the Ajax convenience functions provided by jQuery can be useful, terse ways to accomplish Ajax requests. These methods are just "wrappers" around the core <code class="code">$.ajax</code> method, and simply pre-set some of the options on the <code class="code">$.ajax</code> method.
              </p>
              <p>
                The convenience methods provided by jQuery are:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">$.get</span>
                  </dt>
                  <dd>
                    <p>
                      Perform a GET request to the provided URL.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">$.post</span>
                  </dt>
                  <dd>
                    <p>
                      Perform a POST request to the provided URL.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">$.getScript</span>
                  </dt>
                  <dd>
                    <p>
                      Add a script to the page.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">$.getJSON</span>
                  </dt>
                  <dd>
                    <p>
                      Perform a GET request, and expect JSON to be returned.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                In each case, the methods take the following arguments, in order:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">url</span>
                  </dt>
                  <dd>
                    <p>
                      The URL for the request. Required.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">data</span>
                  </dt>
                  <dd>
                    <p>
                      The data to be sent to the server. Optional. This can either be an object or a query string, such as <code class="code">foo=bar&amp;baz=bim</code>.
                    </p>
                    <div class="note">
                    <h3 class="title">
                      Note
                    </h3>
                    <p>
                      This option is not valid for <code class="code">$.getScript</code>.
                    </p>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">success callback</span>
                  </dt>
                  <dd>
                    <p>
                      A callback function to run if the request succeeds. Optional. The function receives the response data (converted to a JavaScript object if the data type was JSON), as well as the text status of the request and the raw request object.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">data type</span>
                  </dt>
                  <dd>
                    <p>
                      The type of data you expect back from the server. Optional.
                    </p>
                    <div class="note">
                    <h3 class="title">
                      Note
                    </h3>
                    <p>
                      This option is only applicable for methods that don't already specify the data type in their name.
                    </p>
                    </div>
                  </dd>
                </dl>
              </div>
              <div class="example">
                <p class="title">
                  <b>Using jQuery's Ajax convenience methods</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
// get plain text or html
$.get('/users.php', { userId : 1234 }, function(resp) {
    console.log(resp);
});

// add a script to the page, then run a function defined in it
$.getScript('/static/js/myScript.js', function() {
    functionFromMyScript();
});

// get JSON-formatted data from the server
$.getJSON('/details.php', function(resp) {
    $.each(resp, function(k, v) {
        console.log(k + ' : ' + v);
    });
});
</pre>
                </div>
              </div>
            </div>
            <div title="$.fn.load" class="section">
              <div class="titlepage">
                <h3 class="title">
                  <code class="code">$.fn.load</code>
                </h3>
              </div>
              <p>
                The <code class="code">$.fn.load</code> method is unique among jQuery’s Ajax methods in that it is called on a selection. The <code class="code">$.fn.load</code> method fetches HTML from a URL, and uses the returned HTML to populate the selected element(s). In addition to providing a URL to the method, you can optionally provide a selector; jQuery will fetch only the matching content from the returned HTML.
              </p>
              <div class="example">
                <p class="title">
                  <b>Using <code class="code">$.fn.load</code> to populate an element</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('#newContent').load('/foo.html');
</pre>
                </div>
              </div>
              <div class="example">
                <p class="title">
                  <b>Using <code class="code">$.fn.load</code> to populate an element based on a selector</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$('#newContent').load('/foo.html <span class="bold"><strong>#myDiv h1:first</strong></span>', function(html) {
  alert('Content updated!');
});
</pre>
                </div>
              </div>
            </div>
          </div>
          <div title="Ajax and Forms" class="section">
            <h2 class="title">
              Ajax and Forms
            </h2>
            <p>
              jQuery’s ajax capabilities can be especially useful when dealing with forms. The <a href="http://jquery.malsup.com/form/" class="ulink">jQuery Form Plugin</a> is a well-tested tool for adding Ajax capabilities to forms, and you should generally use it for handling forms with Ajax rather than trying to roll your own solution for anything remotely complex. That said, there are a two jQuery methods you should know that relate to form processing in jQuery: <code class="code">$.fn.serialize</code> and <code class="code">$.fn.serializeArray</code>.
            </p>
            <div class="example">
              <p class="title">
                <b>Turning form data into a query string</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myForm').serialize();
</pre>
              </div>
            </div>
            <div class="example">
              <p class="title">
                <b>Creating an array of objects containing form data</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#myForm').serializeArray();

// creates a structure like this:
[
    { name : 'field1', value : 123 },
    { name : 'field2', value : 'hello world' }
]
</pre>
              </div>
            </div>
          </div>
          <div title="Working with JSONP" class="section">
            <h2 class="title">
              Working with JSONP
            </h2>
            <p>
              The advent of JSONP -- essentially a consensual cross-site scripting hack -- has opened the door to powerful mashups of content. Many prominent sites provide JSONP services, allowing you access to their content via a predefined API. A particularly great source of JSONP-formatted data is the <a href="http://developer.yahoo.com/yql/console/" class="ulink">Yahoo! Query Language</a>, which we'll use in the following example to fetch news about cats.
            </p>
            <div class="example">
              <p class="title">
                <b>Using YQL and JSONP</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$.ajax({
    url : 'http://query.yahooapis.com/v1/public/yql',

    // the name of the callback parameter,
    // as specified by the YQL service
    jsonp : 'callback',

    // tell jQuery we're expecting JSONP
    dataType : 'jsonp',

    // tell YQL what we want and that we want JSON
    data : {
        q : 'select title,abstract,url from search.news where query="cat"',
        format : 'json'
    },

    // work with the response
    success : function(response) {
        console.log(response);
    }
});
</pre>
              </div>
            </div>
            <p>
              jQuery handles all the complex aspects of JSONP behind-the-scenes -- all we have to do is tell jQuery the name of the JSONP callback parameter specified by YQL ("callback" in this case), and otherwise the whole process looks and feels like a normal Ajax request.
            </p>
          </div>
          <div title="Ajax Events" class="section">
            <h2 class="title">
              Ajax Events
            </h2>
            <p>
              Often, you’ll want to perform an operation whenever an Ajax requests starts or stops, such as showing or hiding a loading indicator. Rather than defining this behavior inside every Ajax request, you can bind Ajax events to elements just like you'd bind other events. For a complete list of Ajax events, visit <a href="http://docs.jquery.com/Ajax_Events" class="ulink">http://docs.jquery.com/Ajax_Events</a>.
            </p>
            <div class="example">
              <p class="title">
                <b>Setting up a loading indicator using Ajax Events</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$('#loading_indicator')
    .ajaxStart(function() { $(this).show(); })
    .ajaxStop(function() { $(this).hide(); });
</pre>
              </div>
            </div>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Load External Content" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Load External Content
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/load.js</code>. Your task is to load the content of a blog item when a user clicks on the title of the item.
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>Create a target div after the headline for each blog post and store a reference to it on the headline element using <code class="code">$.fn.data</code>.
                  </li>
                  <li>Bind a click event to the headline that will use the <code class="code">$.fn.load</code> method to load the appropriate content from <code class="filename">/exercises/data/blog.html</code> into the target div. Don't forget to prevent the default action of the click event.
                  </li>
                </ol>
              </div>
              <p>
                Note that each blog headline in index.html includes a link to the post. You'll need to leverage the href of that link to get the proper content from blog.html. Once you have the href, here's one way to process it into an ID that you can use as a selector in <code class="code">$.fn.load</code>:
              </p>
              <pre class="programlisting">
var href = 'blog.html#post1';
var tempArray = href.split('#');
var id = '#' + tempArray[1];
</pre>
              <p>
                Remember to make liberal use of <code class="code">console.log</code> to make sure you're on the right path!
              </p>
            </div>
            <div title="Load Content Using JSON" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Load Content Using JSON
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/specials.js</code>. Your task is to show the user details about the special for a given day when the user selects a day from the select dropdown.
              </p>
              <div class="orderedlist">
                <ol class="orderedlist">
                  <li>
                    <p>
                      Append a target div after the form that's inside the #specials element; this will be where you put information about the special once you receive it.
                    </p>
                  </li>
                  <li>Bind to the change event of the select element; when the user changes the selection, send an Ajax request to <code class="filename">/exercises/data/specials.json</code>.
                  </li>
                  <li>When the request returns a response, use the value the user selected in the select (hint: <code class="code">$.fn.val</code>) to look up information about the special in the JSON response.
                  </li>
                  <li>
                    <p>
                      Add some HTML about the special to the target div you created.
                    </p>
                  </li>
                  <li>
                    <p>
                      Finally, because the form is now Ajax-enabled, remove the submit button from the form.
                    </p>
                  </li>
                </ol>
              </div>
              <p>
                Note that we're loading the JSON every time the user changes their selection. How could we change the code so we only make the request once, and then use a cached response when the user changes their choice in the select?
              </p>
            </div>
          </div>
        </div>
        <div title="Plugins" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Plugins
                </h2>
              </div>
            </div>
          </div>
          <div title="What exactly is a plugin?" class="section">
            <h2 class="title">
              What exactly is a plugin?
            </h2>
            <p>
              A jQuery plugin is simply a new method that we use to extend jQuery's prototype object. By extending the prototype object you enable all jQuery objects to inherit any methods that you add. As established, whenever you call <code class="code">jQuery()</code> you're creating a new jQuery object, with all of jQuery's methods inherited.
            </p>
            <p>
              The idea of a plugin is to do something with a collection of elements. You could consider each method that comes with the jQuery core a plugin, like <code class="code">fadeOut</code> or <code class="code">addClass</code>.
            </p>
            <p>
              You can make your own plugins and use them privately in your code or you can release them into the wild. There are thousands of jQuery plugins available online. The barrier to creating a plugin of your own is so low that you'll want to do it straight away!
            </p>
          </div>
          <div title="How to create a basic plugin" class="section">
            <h2 class="title">
              How to create a basic plugin
            </h2>
            <p>
              The notation for creating a typical plugin is as follows:
            </p>
            <pre class="programlisting">
(function($){
    $.fn.myNewPlugin = function() {
        return this.each(function(){
            // do something
        });
    };
}(jQuery));
</pre>
            <p>
              Don't let that confuse you though. The point of a jQuery plugin is to extend jQuery's prototype object, and that's what's happening on this line:
            </p>
            <pre class="programlisting">
$.fn.myNewPlugin = function() { //...
</pre>
            <p>
              We wrap this assignment in an immediately-invoked function:
            </p>
            <pre class="programlisting">
(function($){
    //...
}(jQuery));
</pre>
            <p>
              This has the effect of creating a "private" scope that allows us to extend jQuery using the dollar symbol without having to risk the possibility that the dollar has been overwritten by another library.
            </p>
            <p>
              So our actual plugin, thus far, is this:
            </p>
            <pre class="programlisting">
$.fn.myNewPlugin = function() {
    return this.each(function(){
        // do something
    });
};
</pre>
            <p>
              The <code class="code">this</code> keyword within the new plugin refers to the jQuery object on which the plugin is being called.
            </p>
            <pre class="programlisting">
var somejQueryObject = $('#something');

$.fn.myNewPlugin = function() {
    alert(this === somejQueryObject);
};

somejQueryObject.myNewPlugin(); // alerts 'true'
</pre>
            <p>
              Your typical jQuery object will contain references to any number of DOM elements, and that's why jQuery objects are often referred to as collections.
            </p>
            <p>
              So, to do something with a collection we need to loop through it, which is most easily achieved using jQuery's <code class="code">each()</code> method:
            </p>
            <pre class="programlisting">
$.fn.myNewPlugin = function() {
    return this.each(function(){

    });
};
</pre>
            <p>
              jQuery's <code class="code">each()</code> method, like most other jQuery methods, returns a jQuery object, thus enabling what we've all come to know and love as 'chaining' (<code class="code">$(...).css().attr()...</code>). We wouldn't want to break this convention so we return the <code class="code">this</code> object. Within this loop you can do whatever you want with each element. Here's an example of a small plugin using some of the techniques we've discussed:
            </p>
            <pre class="programlisting">
(function($){
    $.fn.showLinkLocation = function() {
        return this.filter('a').each(function(){
            $(this).append(
                ' (' + $(this).attr('href') + ')'
            );
        });
    };
}(jQuery));

// Usage example:
$('a').showLinkLocation();
</pre>
            <p>
              This handy plugin goes through all anchors in the collection and appends the <code class="code">href</code> attribute in brackets.
            </p>
            <pre class="programlisting">
&lt;!-- Before plugin is called: --&gt;
&lt;a href="page.html"&gt;Foo&lt;/a&gt;

&lt;!-- After plugin is called: --&gt;
&lt;a href="page.html"&gt;Foo (page.html)&lt;/a&gt;
</pre>
            <p>
              Our plugin can be optimised though:
            </p>
            <pre class="programlisting">
(function($){
    $.fn.showLinkLocation = function() {
        return this.filter('a').append(function(){
              return ' (' + this.href + ')';
        });
    };
}(jQuery));
</pre>
            <p>
              We're using the <code class="code">append</code> method's capability to accept a callback, and the return value of that callback will determine what is appended to each element in the collection. Notice also that we're not using the <code class="code">attr</code> method to retrieve the <code class="code">href</code> attribute, because the native DOM API gives us easy access with the aptly named <code class="code">href</code> property.
            </p>
            <p>
              Here's another example of a plugin. This one doesn't require us to loop through every elememt with the <code class="code">each()</code> method. Instead, we're simply going to delegate to other jQuery methods directly:
            </p>
            <pre class="programlisting">
(function($){
    $.fn.fadeInAndAddClass = function(duration, className) {
        return this.fadeIn(duration, function(){
            $(this).addClass(className);
        });
    };
}(jQuery));

// Usage example:
$('a').fadeInAndAddClass(400, 'finishedFading');
</pre>
          </div>
          <div title="Finding &amp; Evaluating Plugins" class="section">
            <h2 class="title">
              Finding &amp; Evaluating Plugins
            </h2>
            <p>
              Plugins extend the basic jQuery functionality, and one of the most celebrated aspects of the library is its extensive plugin ecosystem. From table sorting to form validation to autocompletion ... if there’s a need for it, chances are good that someone has written a plugin for it.
            </p>
            <p>
              The quality of jQuery plugins varies widely. Many plugins are extensively tested and well-maintained, but others are hastily created and then ignored. More than a few fail to follow best practices.
            </p>
            <p>
              Google is your best initial resource for locating plugins, though the jQuery team is working on an improved plugin repository. Once you’ve identified some options via a Google search, you may want to consult the jQuery mailing list or the #jquery IRC channel to get input from others.
            </p>
            <p>
              When looking for a plugin to fill a need, do your homework. Ensure that the plugin is well-documented, and look for the author to provide lots of examples of its use. Be wary of plugins that do far more than you need; they can end up adding substantial overhead to your page. For more tips on spotting a subpar plugin, read <a href="http://remysharp.com/2010/06/03/signs-of-a-poorly-written-jquery-plugin/" class="ulink">Signs of a poorly written jQuery plugin</a> by Remy Sharp.
            </p>
            <p>
              Once you choose a plugin, you’ll need to add it to your page. Download the plugin, unzip it if necessary, place it your application’s directory structure, then include the plugin in your page using a script tag (after you include jQuery).
            </p>
          </div>
          <div title="Writing Plugins" class="section">
            <h2 class="title">
              Writing Plugins
            </h2>
            <p>
              Sometimes you want to make a piece of functionality available throughout your code; for example, perhaps you want a single method you can call on a jQuery selection that performs a series of operations on the selection. In this case, you may want to write a plugin.
            </p>
            <p>
              Most plugins are simply methods created in the <code class="code">$.fn</code> namespace. jQuery guarantees that a method called on a jQuery object will be able to access that jQuery object as <code class="code">this</code> inside the method. In return, your plugin needs to guarantee that it returns the same object it received, unless explicitly documented otherwise.
            </p>
            <p>
              Here is an example of a simple plugin:
            </p>
            <div class="example">
              <p class="title">
                <b>Creating a plugin to add and remove a class on hover</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
// defining the plugin
(function($){
    $.fn.hoverClass = function(c) {
        return this.hover(
            function() { $(this).toggleClass(c); }
        );
    };
})(jQuery);

// using the plugin
$('li').hoverClass('hover');
</pre>
              </div>
            </div>
            <p>
              For more on plugin development, read Mike Alsup's essential post, <a href="http://www.learningjquery.com/2007/10/a-plugin-development-pattern" class="ulink">A Plugin Development Pattern</a>. In it, he creates a plugin called <code class="code">$.fn.hilight</code>, which provides support for the metadata plugin if it's present, and provides a centralized method for setting global and instance options for the plugin.
            </p>
            <div class="example">
              <p class="title">
                <b>The Mike Alsup jQuery Plugin Development Pattern</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
//
// create closure
//
(function($) {
  //
  // plugin definition
  //
  $.fn.hilight = function(options) {
    debug(this);
    // build main options before element iteration
    var opts = $.extend({}, $.fn.hilight.defaults, options);
    // iterate and reformat each matched element
    return this.each(function() {
      $this = $(this);
      // build element specific options
      var o = $.meta ? $.extend({}, opts, $this.data()) : opts;
      // update element styles
      $this.css({
        backgroundColor: o.background,
        color: o.foreground
      });
      var markup = $this.html();
      // call our format function
      markup = $.fn.hilight.format(markup);
      $this.html(markup);
    });
  };
  //
  // private function for debugging
  //
  function debug($obj) {
    if (window.console &amp;&amp; window.console.log)
      window.console.log('hilight selection count: ' + $obj.size());
  };
  //
  // define and expose our format function
  //
  $.fn.hilight.format = function(txt) {
    return '&lt;strong&gt;' + txt + '&lt;/strong&gt;';
  };
  //
  // plugin defaults
  //
  $.fn.hilight.defaults = {
    foreground: 'red',
    background: 'yellow'
  };
//
// end of closure
//
})(jQuery);
</pre>
              </div>
            </div>
          </div>
          <h2 class="title">
            Writing Stateful Plugins with the jQuery UI Widget Factory
          </h2>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            This section is based, with permission, on the blog post <a href="http://blog.nemikor.com/2010/05/15/building-stateful-jquery-plugins/" class="ulink">Building Stateful jQuery Plugins</a> by Scott Gonzalez.
          </p>
          </div>
          <p>
            While most existing jQuery plugins are stateless — that is, we call them on an element and that is the extent of our interaction with the plugin —&nbsp;there’s a large set of functionality that doesn’t fit into the basic plugin pattern.
          </p>
          <p>
            In order to fill this gap, jQuery UI has implemented a more advanced plugin system. The new system manages state, allows multiple functions to be exposed via a single plugin, and provides various extension points. This system is called the widget factory and is exposed as <code class="code">jQuery.widget</code> as part of jQuery UI 1.8; however, it can be used independently of jQuery UI.
          </p>
          <p>
            To demonstrate the capabilities of the widget factory, we'll build a simple progress bar plugin.
          </p>
          <p>
            To start, we’ll create a progress bar that just lets us set the progress once. As we can see below, this is done by calling <code class="code">jQuery.widget</code> with two parameters: the name of the plugin to create and an object literal containing functions to support our plugin. When our plugin gets called, it will create a new plugin instance and all functions will be executed within the context of that instance. This is different from a standard jQuery plugin in two important ways. First, the context is an object, not a DOM element. Second, the context is always a single object, never a collection.
          </p>
          <div class="example">
            <p class="title">
              <b>A simple, stateful plugin using the jQuery UI widget factory</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$.widget("nmk.progressbar", {
    _create: function() {
        var progress = this.options.value + "%";
        this.element
            .addClass("progressbar")
            .text(progress);
    }
});
</pre>
            </div>
          </div>
          <p>
            The name of the plugin must contain a namespace; in this case we’ve used the <code class="code">nmk</code> namespace. There is a limitation that namespaces be exactly one level deep — that is, we can't use a namespace like <code class="code">nmk.foo</code>. We can also see that the widget factory has provided two properties for us. <code class="code">this.element</code> is a jQuery object containing exactly one element. If our plugin is called on a jQuery object containing multiple elements, a separate plugin instance will be created for each element, and each instance will have its own <code class="code">this.element</code>. The second property, <code class="code">this.options</code>, is a hash containing key/value pairs for all of our plugin’s options. These options can be passed to our plugin as shown here.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            In our example we use the <code class="code">nmk</code> namespace. The <code class="code">ui</code> namespace is reserved for official jQuery UI plugins. When building your own plugins, you should create your own namespace. This makes it clear where the plugin came from and whether it is part of a larger collection.
          </p>
          </div>
          <div class="example">
            <p class="title">
              <b>Passing options to a widget</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$("&lt;div&gt;&lt;/div&gt;")
    .appendTo( "body" )
    .progressbar({ value: 20 });
</pre>
            </div>
          </div>
          <p>
            When we call <code class="code">jQuery.widget</code> it extends jQuery by adding a method to <code class="code">jQuery.fn</code> (the same way we'd create a standard plugin). The name of the function it adds is based on the name you pass to <code class="code">jQuery.widget</code>, without the namespace; in our case it will create <code class="code">jQuery.fn.progressbar</code>. The options passed to our plugin get set in <code class="code">this.options</code> inside of our plugin instance. As shown below, we can specify default values for any of our options. When designing your API, you should figure out the most common use case for your plugin so that you can set appropriate default values and make all options truly optional.
          </p>
          <div class="example">
            <p class="title">
              <b>Setting default options for a widget</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$.widget("nmk.progressbar", {
    // default options
    options: {
        value: 0
    },

    _create: function() {
        var progress = this.options.value + "%";
        this.element
            .addClass( "progressbar" )
            .text( progress );
    }
});
</pre>
            </div>
          </div>
          <div class="titlepage">
            <h3 class="title">
              Adding Methods to a Widget
            </h3>
          </div>
          <p>
            Now that we can initialize our progress bar, we’ll add the ability to perform actions by calling methods on our plugin instance. To define a plugin method, we just include the function in the object literal that we pass to <code class="code">jQuery.widget</code>. We can also define “private” methods by prepending an underscore to the function name.
          </p>
          <div class="example">
            <p class="title">
              <b>Creating widget methods</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
$.widget("nmk.progressbar", {
    options: {
        value: 0
    },

    _create: function() {
        var progress = this.options.value + "%";
        this.element
            .addClass("progressbar")
            .text(progress);
    },

    // create a public method
    value: function(value) {
        // no value passed, act as a getter
        if (value === undefined) {
            return this.options.value;
        // value passed, act as a setter
        } else {
            this.options.value = this._constrain(value);
            var progress = this.options.value + "%";
            this.element.text(progress);
        }
    },

    // create a private method
    _constrain: function(value) {
        if (value &gt; 100) {
            value = 100;
        }
        if (value &lt; 0) {
            value = 0;
        }
        return value;
    }
});
</pre>
            </div>
          </div>
          <p>
            To call a method on a plugin instance, you pass the name of the method to the jQuery plugin. If you are calling a method that accepts parameters, you simply pass those parameters after the method name.
          </p>
          <div class="example">
            <p class="title">
              <b>Calling methods on a plugin instance</b>
            </p>
            <div class="example-contents">
              <pre class="programlisting">
var bar = $("&lt;div&gt;&lt;/div&gt;")
    .appendTo("body")
    .progressbar({ value: 20 });

// get the current value
alert(bar.progressbar("value"));

// update the value
bar.progressbar("value", 50);

// get the current value again
alert(bar.progressbar("value"));
</pre>
            </div>
          </div>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            Executing methods by passing the method name to the same jQuery function that was used to initialize the plugin may seem odd. This is done to prevent pollution of the jQuery namespace while maintaining the ability to chain method calls.
          </p>
          </div>
          <div title="Working with Widget Options" class="section">
            <div class="titlepage">
              <h3 class="title">
                Working with Widget Options
              </h3>
            </div>
            <p>
              One of the methods that is automatically available to our plugin is the <code class="code">option</code> method. The option method allows you to get and set options after initialization. This method works exactly like jQuery’s css and attr methods: you can pass just a name to use it as a setter, a name and value to use it as a single setter, or a hash of name/value pairs to set multiple values. When used as a getter, the plugin will return the current value of the option that corresponds to the name that was passed in. When used as a setter, the plugin’s <code class="code">_setOption</code> method will be called for each option that is being set. We can specify a <code class="code">_setOption</code> method in our plugin to react to option changes.
            </p>
            <div class="example">
              <p class="title">
                <b>Responding when an option is set</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$.widget("nmk.progressbar", {
    options: {
        value: 0
    },

    _create: function() {
        this.element.addClass("progressbar");
        this._update();
    },

    _setOption: function(key, value) {
        this.options[key] = value;
        this._update();
    },

    _update: function() {
        var progress = this.options.value + "%";
        this.element.text(progress);
    }
});
</pre>
              </div>
            </div>
          </div>
          <div title="Adding Callbacks" class="section">
            <div class="titlepage">
              <h3 class="title">
                Adding Callbacks
              </h3>
            </div>
            <p>
              One of the easiest ways to make your plugin extensible is to add callbacks so users can react when the state of your plugin changes. We can see below how to add a callback to our progress bar to signify when the progress has reached 100%. The <code class="code">_trigger</code> method takes three parameters: the name of the callback, a native event object that initiated the callback, and a hash of data relevant to the event. The callback name is the only required parameter, but the others can be very useful for users who want to implement custom functionality on top of your plugin. For example, if we were building a draggable plugin, we could pass the native mousemove event when triggering a drag callback; this would allow users to react to the drag based on the x/y coordinates provided by the event object.
            </p>
            <div class="example">
              <p class="title">
                <b>Providing callbacks for user extension</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$.widget("nmk.progressbar", {
    options: {
        value: 0
    },

    _create: function() {
        this.element.addClass("progressbar");
        this._update();
    },

    _setOption: function(key, value) {
        this.options[key] = value;
        this._update();
    },

    _update: function() {
        var progress = this.options.value + "%";
        this.element.text(progress);
        if (this.options.value == 100) {
            this._trigger("complete", null, { value: 100 });
        }
    }
});
</pre>
              </div>
            </div>
            <p>
              Callback functions are essentially just additional options, so you can get and set them just like any other option. Whenever a callback is executed, a corresponding event is triggered as well. The event type is determined by concatenating the plugin name and the callback name. The callback and event both receive the same two parameters: an event object and a hash of data relevant to the event, as we’ll see below.
            </p>
            <p>
              If your plugin has functionality that you want to allow the user to prevent, the best way to support this is by creating cancelable callbacks. Users can cancel a callback, or its associated event, the same way they cancel any native event: by calling <code class="code">event.preventDefault()</code> or using <code class="code">return false</code>. If the user cancels the callback, the <code class="code">_trigger</code> method will return false so you can implement the appropriate functionality within your plugin.
            </p>
            <div class="example">
              <p class="title">
                <b>Binding to widget events</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
var bar = $("&lt;div&gt;&lt;/div&gt;")
    .appendTo("body")
    .progressbar({
        complete: function(event, data) {
            alert( "Callbacks are great!" );
        }
    })
    .bind("progressbarcomplete", function(event, data) {
        alert("Events bubble and support many handlers for extreme flexibility.");
        alert("The progress bar value is " + data.value);
    });

bar.progressbar("option", "value", 100);
</pre>
              </div>
            </div>
            <div title="The Widget Factory: Under the Hood" class="sidebar">
              <p class="title">
                <b>The Widget Factory: Under the Hood</b>
              </p>
              <p>
                When you call <code class="code">jQuery.widget</code>, it creates a constructor function for your plugin and sets the object literal that you pass in as the prototype for your plugin instances. All of the functionality that automatically gets added to your plugin comes from a base widget prototype, which is defined as <code class="code">jQuery.Widget.prototype</code>. When a plugin instance is created, it is stored on the original DOM element using <code class="code">jQuery.data</code>, with the plugin name as the key.
              </p>
              <p>
                Because the plugin instance is directly linked to the DOM element, you can access the plugin instance directly instead of going through the exposed plugin method if you want. This will allow you to call methods directly on the plugin instance instead of passing method names as strings and will also give you direct access to the plugin’s properties.
              </p>
              <pre class="programlisting">
var bar = $("&lt;div&gt;&lt;/div&gt;")
    .appendTo("body")
    .progressbar()
    .data("progressbar" );

// call a method directly on the plugin instance
bar.option("value", 50);

// access properties on the plugin instance
alert(bar.options.value);
</pre>
              <p>
                One of the biggest benefits of having a constructor and prototype for a plugin is the ease of extending the plugin. By adding or modifying methods on the plugin’s prototype, we can modify the behavior of all instances of our plugin. For example, if we wanted to add a method to our progress bar to reset the progress to 0% we could add this method to the prototype and it would instantly be available to be called on any plugin instance.
              </p>
              <pre class="programlisting">
$.nmk.progressbar.prototype.reset = function() {
    this._setOption("value", 0);
};
</pre>
            </div>
          </div>
          <div title="Cleaning Up" class="section">
            <div class="titlepage">
              <h3 class="title">
                Cleaning Up
              </h3>
            </div>
            <p>
              In some cases, it will make sense to allow users to apply and then later unapply your plugin. You can accomplish this via the destroy method. Within the <code class="code">destroy</code> method, you should undo anything your plugin may have done during initialization or later use. The <code class="code">destroy</code> method is automatically called if the element that your plugin instance is tied to is removed from the DOM, so this can be used for garbage collection as well. The default <code class="code">destroy</code> method removes the link between the DOM element and the plugin instance, so it’s important to call the base function from your plugin’s <code class="code">destroy</code> method.
            </p>
            <div class="example">
              <p class="title">
                <b>Adding a destroy method to a widget</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
$.widget( "nmk.progressbar", {
    options: {
        value: 0
    },

    _create: function() {
        this.element.addClass("progressbar");
        this._update();
    },

    _setOption: function(key, value) {
        this.options[key] = value;
        this._update();
    },

    _update: function() {
        var progress = this.options.value + "%";
        this.element.text(progress);
        if (this.options.value == 100 ) {
            this._trigger("complete", null, { value: 100 });
        }
    },

    destroy: function() {
        this.element
            .removeClass("progressbar")
            .text("");

        // call the base destroy function
        $.Widget.prototype.destroy.call(this);
    }
});
</pre>
              </div>
            </div>
          </div>
          <div title="Conclusion" class="section">
            <div class="titlepage">
              <h3 class="title">
                Conclusion
              </h3>
            </div>
            <p>
              The widget factory is only one way of creating stateful plugins. There are a few different models that can be used and each have their own advantages and disadvantages. The widget factory solves lots of common problems for you and can greatly improve productivity, it also greatly improves code reuse, making it a great fit for jQuery UI as well as many other stateful plugins.
            </p>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Make a Table Sortable" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Make a Table Sortable
                </h3>
              </div>
              <p>
                For this exercise, your task is to identify, download, and implement a table sorting plugin on the index.html page. When you’re done, all columns in the table on the page should be sortable.
              </p>
            </div>
            <div title="Write a Table-Striping Plugin" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Write a Table-Striping Plugin
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/index.html</code> in your browser. Use the file <code class="filename">/exercises/js/stripe.js</code>. Your task is to write a plugin called "stripe" that you can call on any table element. When the plugin is called on a table element, it should change the color of odd rows in the table body to a user-specified color.
              </p>
              <pre class="programlisting">
$('#myTable').stripe('#cccccc');
</pre>
              <p>
                Don't forget to return the table so other methods can be chained after the plugin!
              </p>
            </div>
          </div>
        </div>
      </div>
      <div title="Part&nbsp;III.&nbsp;Advanced Topics" class="part">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                Part&nbsp;III.&nbsp;Advanced Topics
              </h1>
            </div>
          </div>
        </div>
        <div title="This Section is a Work in Progress" class="article">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  This Section is a Work in Progress
                </h2>
              </div>
            </div>
            <hr>
          </div>
          <p>
            Please visit <a href="http://github.com/rmurphey/jqfundamentals" class="ulink">http://github.com/rmurphey/jqfundamentals</a> to contribute!
          </p>
        </div>
        <div title="Performance Best Practices" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Performance Best Practices
                </h2>
              </div>
            </div>
          </div>
          <p>
            This chapter covers a number of jQuery and JavaScript best practices, in no particular order. Many of the best practices in this chapter are based on the <a href="http://paulirish.com/perf" class="ulink">jQuery Anti-Patterns for Performance</a> presentation by Paul Irish.
          </p>
          <div title="Cache length during loops" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Cache length during loops
                  </h2>
                </div>
              </div>
            </div>
            <p>
              In a for loop, don't access the length property of an array every time; cache it beforehand.
            </p>
            <pre class="programlisting">
var myLength = myArray.length;

for (var i = 0; i &lt; myLength; i++) {
    // do stuff
}
</pre>
          </div>
          <div title="Append new content outside of a loop" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Append new content outside of a loop
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Touching the DOM comes at a cost; if you're adding a lot of elements to the DOM, do it all at once, not one at a time.
            </p>
            <pre class="programlisting">
// this is bad
$.each(myArray, function(i, item) {
   var newListItem = '&lt;li&gt;' + item + '&lt;/li&gt;';
   $('#ballers').append(newListItem);
});

// better: do this
var frag = document.createDocumentFragment();

$.each(myArray, function(i, item) {
    var newListItem = '&lt;li&gt;' + item + '&lt;/li&gt;';
    frag.appendChild(newListItem);
});
$('#ballers')[0].appendChild(frag);

// or do this
var myHtml = '';

$.each(myArray, function(i, item) {
    html += '&lt;li&gt;' + item + '&lt;/li&gt;';
});
$('#ballers').html(myHtml);
</pre>
          </div>
          <div title="Keep things DRY" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Keep things DRY
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Don't repeat yourself; if you're repeating yourself, you're doing it wrong.
            </p>
            <pre class="programlisting">
// BAD
if ($eventfade.data('currently') != 'showing') {
    $eventfade.stop();
}

if ($eventhover.data('currently') != 'showing') {
    $eventhover.stop();
}

if ($spans.data('currently') != 'showing') {
    $spans.stop();
}

// GOOD!!
var $elems = [$eventfade, $eventhover, $spans];
$.each($elems, function(i,elem) {
    if (elem.data('currently') != 'showing') {
        elem.stop();
    }
});
</pre>
          </div>
          <div title="Beware anonymous functions" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Beware anonymous functions
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Anonymous functions bound everywhere are a pain. They're difficult to debug, maintain, test, or reuse. Instead, use an object literal to organize and name your handlers and callbacks.
            </p>
            <pre class="programlisting">
// BAD
$(document).ready(function() {
    $('#magic').click(function(e) {
        $('#yayeffects').slideUp(function() {
            // ...
        });
    });

    $('#happiness').load(url + ' #unicorns', function() {
        // ...
    });
});

// BETTER
var PI = {
    onReady : function() {
        $('#magic').click(PI.candyMtn);
        $('#happiness').load(PI.url + ' #unicorns', PI.unicornCb);
    },

    candyMtn : function(e) {
        $('#yayeffects').slideUp(PI.slideCb);
    },

    slideCb : function() { ... },

    unicornCb : function() { ... }
};

$(document).ready(PI.onReady);
</pre>
          </div>
          <div title="Optimize Selectors" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Optimize Selectors
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Selector optimization is less important than it used to be, as more browsers implement <code class="code">document.querySelectorAll()</code> and the burden of selection shifts from jQuery to the browser. However, there are still some tips to keep in mind.
            </p>
            <div title="ID-Based Selectors" class="sect2">
              <div class="titlepage">
                <h3 class="title">
                  ID-Based Selectors
                </h3>
              </div>
              <p>
                Beginning your selector with an ID is always best.
              </p>
              <pre class="programlisting">
// fast
$('#container div.robotarm');

// super-fast
$('#container').find('div.robotarm');
</pre>
              <p>
                The <code class="code">$.fn.find</code> approach is faster because the first selection is handled without going through the Sizzle selector engine — ID-only selections are handled using <code class="code">document.getElementById()</code>, which is extremely fast because it is native to the browser.
              </p>
            </div>
            <div title="Specificity" class="sect2">
              <div class="titlepage">
                <h3 class="title">
                  Specificity
                </h3>
              </div>
              <p>
                Be specific on the right-hand side of your selector, and less specific on the left.
              </p>
              <pre class="programlisting">
// unoptimized
$('div.data .gonzalez');

// optimized
$('.data td.gonzalez');
</pre>
              <p>
                Use <code class="code">tag.class</code> if possible on your right-most selector, and just <code class="code">tag</code> or just <code class="code">.class</code> on the left.
              </p>
              <p>
                Avoid excessive specificity.
              </p>
              <pre class="programlisting">
$('.data table.attendees td.gonzalez');

// better: drop the middle if possible
$('.data td.gonzalez');
</pre>
              <p>
                A "flatter" DOM also helps improve selector performance, as the selector engine has fewer layers to traverse when looking for an element.
              </p>
            </div>
            <div title="Avoid the Universal Selector" class="sect2">
              <div class="titlepage">
                <h3 class="title">
                  Avoid the Universal Selector
                </h3>
              </div>
              <p>
                Selections that specify or imply that a match could be found anywhere can be very slow.
              </p>
              <pre class="programlisting">
$('.buttons &gt; *');  // extremely expensive
$('.buttons').children();  // much better

$('.gender :radio');  // implied universal selection
$('.gender *:radio'); // same thing, explicit now
$('.gender input:radio'); // much better
</pre>
            </div>
          </div>
          <div title="Use Event Delegation" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Use Event Delegation
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Event delegation allows you to bind an event handler to one container element (for example, an unordered list) instead of multiple contained elements (for example, list items). jQuery makes this easy with $.fn.live and $.fn.delegate. Where possible, you should use <code class="code">$.fn.delegate</code> instead of <code class="code">$.fn.live</code>, as it eliminates the need for an unnecessary selection, and its explicit context (vs. <code class="code">$.fn.live</code>'s context of <code class="code">document</code>) reduces overhead by approximately 80%.
            </p>
            <p>
              In addition to performance benefits, event delegation also allows you to add new contained elements to your page without having to re-bind the event handlers for them as they're added.
            </p>
            <pre class="programlisting">
// bad (if there are lots of list items)
$('li.trigger').click(handlerFn);

// better: event delegation with $.fn.live
$('li.trigger').live('click', handlerFn);

// best: event delegation with $.fn.delegate
// allows you to specify a context easily
$('#myList').delegate('li.trigger', 'click', handlerFn);
</pre>
          </div>
          <div title="Detach Elements to Work With Them" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Detach Elements to Work With Them
                  </h2>
                </div>
              </div>
            </div>
            <p>
              The DOM is slow; you want to avoid manipulating it as much as possible. jQuery introduced <code class="code">$.fn.detach</code> in version 1.4 to help address this issue, allowing you to remove an element from the DOM while you work with it.
            </p>
            <pre class="programlisting">
var $table = $('#myTable');
var $parent = $table.parent();

$table.detach();
// ... add lots and lots of rows to table
$parent.append(table);
</pre>
          </div>
          <div title="Use Stylesheets for Changing CSS on Many Elements" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Use Stylesheets for Changing CSS on Many Elements
                  </h2>
                </div>
              </div>
            </div>
            <p>
              If you're changing the CSS of more than 20 elements using $.fn.css, consider adding a style tag to the page instead for a nearly 60% increase in speed.
            </p>
            <pre class="programlisting">
// fine for up to 20 elements, slow after that
$('a.swedberg').css('color', '#asd123');
$('&lt;style type="text/css"&gt;a.swedberg { color : #asd123 }&lt;/style&gt;')
    .appendTo('head');
</pre>
          </div>
          <div title="Use $.data Instead of $.fn.data" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Use <code class="code">$.data</code> Instead of <code class="code">$.fn.data</code>
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Using $.data on a DOM element instead of calling $.fn.data on a jQuery selection can be up to 10 times faster. Be sure you understand the difference between a DOM element and a jQuery selection before doing this, though.
            </p>
            <pre class="programlisting">
// regular
$(elem).data(key,value);  

// 10x faster
 $.data(elem,key,value);
</pre>
          </div>
          <div title="Don't Act on Absent Elements" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Don't Act on Absent Elements
                  </h2>
                </div>
              </div>
            </div>
            <p>
              jQuery won't tell you if you're trying to run a whole lot of code on an empty selection — it will proceed as though nothing's wrong. It's up to you to verify that your selection contains some elements.
            </p>
            <pre class="programlisting">
// BAD: this runs three functions
// before it realizes there's nothing
// in the selection
$('#nosuchthing').slideUp();

// Better
var $mySelection = $('#nosuchthing');
if ($mySelection.length) { $mySelection.slideUp(); }

// BEST: add a doOnce plugin
jQuery.fn.doOnce = function(func){
    this.length &amp;&amp; func.apply(this);
    return this;
 }

 $('li.cartitems').doOnce(function(){ 
    // make it ajax! \o/ 
});
</pre>
            <p>
              This guidance is especially applicable for jQuery UI widgets, which have a lot of overhead even when the selection doesn't contain elements.
            </p>
          </div>
          <div title="Variable Definition" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Variable Definition
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Variables can be defined in one statement instead of several.
            </p>
            <pre class="programlisting">
// old &amp; busted
var test = 1;
var test2 = function() { ... };
var test3 = test2(test);

// new hotness
var test = 1,
    test2 = function() { ... },
    test3 = test2(test);
</pre>
            <p>
              In self-executing functions, variable definition can be skipped all together.
            </p>
            <pre class="programlisting">
(function(foo, bar) { ... })(1, 2);
</pre>
          </div>
          <div title="Conditionals" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Conditionals
                  </h2>
                </div>
              </div>
            </div>
            <pre class="programlisting">
// old way
if (type == 'foo' || type == 'bar') { ... }

// better
if (/^(foo|bar)$/.test(type)) { ... }

// object literal lookup
if (({ foo : 1, bar : 1 })[type]) { ... }
</pre>
          </div>
          <div title="Don't Treat jQuery as a Black Box" class="sect1">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    Don't Treat jQuery as a Black Box
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Use the source as your documentation — bookmark <a href="http://bit.ly/jqsource" class="ulink">http://bit.ly/jqsource</a> and refer to it often.
            </p>
          </div>
        </div>
        <div title="Code Organization" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Code Organization
                </h2>
              </div>
            </div>
          </div>
          <div title="Overview" class="section">
            <h2 class="title">
              Overview
            </h2>
            <p>
              When you move beyond adding simple enhancements to your website with jQuery and start developing full-blown client-side applications, you need to consider how to organize your code. In this chapter, we'll take a look at various code organization patterns you can use in your jQuery application and explore the RequireJS dependency management and build system.
            </p>
            <div title="Key Concepts" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Key Concepts
                </h3>
              </div>
              <p>
                Before we jump into code organization patterns, it's important to understand some concepts that are common to all good code organization patterns.
              </p>
              <ul>
                <li>Your code should be divided into units of functionality — modules, services, etc. Avoid the temptation to have all of your code in one huge <code class="code">$(document).ready()</code> block. This concept, loosely, is known as encapsulation.
                </li>
                <li>
                  <p>
                    Don't repeat yourself. Identify similarities among pieces of functionality, and use inheritance techniques to avoid repetitive code.
                  </p>
                </li>
                <li>
                  <p>
                    Despite jQuery's DOM-centric nature, JavaScript applications are not all about the DOM. Remember that not all pieces of functionality need to — or should — have a DOM representation.
                  </p>
                </li>
                <li>
                  <p>
                    Units of functionality should be <a href="http://en.wikipedia.org/wiki/Loose_coupling" class="ulink">loosely coupled</a> — a unit of functionality should be able to exist on its own, and communication between units should be handled via a messaging system such as custom events or pub/sub. Stay away from direct communication between units of functionality whenever possible.
                  </p>
                </li>
              </ul>
              <p>
                The concept of loose coupling can be especially troublesome to developers making their first foray into complex applications, so be mindful of this as you're getting started.
              </p>
            </div>
          </div>
          <div title="Encapsulation" class="section">
            <h2 class="title">
              Encapsulation
            </h2>
            <p>
              The first step to code organization is separating pieces of your application into distinct pieces; sometimes, even just this effort is sufficient to lend
            </p>
            <div title="The Object Literal" class="section">
              <div class="titlepage">
                <h3 class="title">
                  The Object Literal
                </h3>
              </div>
              <p>
                An object literal is perhaps the simplest way to encapsulate related code. It doesn't offer any privacy for properties or methods, but it's useful for eliminating anonymous functions from your code, centralizing configuration options, and easing the path to reuse and refactoring.
              </p>
              <div class="example">
                <p class="title">
                  <b>An object literal</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var myFeature = {
    myProperty : 'hello',

    myMethod : function() {
        console.log(myFeature.myProperty);
    },

    init : function(settings) {
        myFeature.settings = settings;
    },

    readSettings : function() {
        console.log(myFeature.settings);
    }
};

myFeature.myProperty; // 'hello'
myFeature.myMethod(); // logs 'hello'
myFeature.init({ foo : 'bar' });
myFeature.readSettings(); // logs { foo : 'bar' }
</pre>
                </div>
              </div>
              <p>
                The object literal above is simply an object assigned to a variable. The object has one property and several methods. All of the properties and methods are public, so any part of your application can see the properties and call methods on the object. While there is an init method, there's nothing requiring that it be called before the object is functional.
              </p>
              <p>
                How would we apply this pattern to jQuery code? Let's say that we had this code written in the traditional jQuery style:
              </p>
              <pre class="programlisting">
// clicking on a list item loads some content
// using the list item's ID and hides content
// in sibling list items
$(document).ready(function() {
  $('#myFeature li')
    .append('&lt;div/&gt;')
    .click(function() {
      var $this = $(this);
      var $div = $this.find('div');
      $div.load('foo.php?item=' +
        $this.attr('id'),
        function() {
          $div.show();
          $this.siblings()
            .find('div').hide();
        }
      );
    });
});
</pre>
              <p>
                If this were the extent of our application, leaving it as-is would be fine. On the other hand, if this was a piece of a larger application, we'd do well to keep this functionality separate from unrelated functionality. We might also want to move the URL out of the code and into a configuration area. Finally, we might want to break up the chain to make it easier to modify pieces of the functionality later.
              </p>
              <div class="example">
                <p class="title">
                  <b>Using an object literal for a jQuery feature</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var myFeature = {
    init : function(settings) {
        myFeature.config = {
            $items : $('#myFeature li'),
            $container : $('&lt;div class="container"&gt;&lt;/div&gt;'),
            urlBase : '/foo.php?item='
        };

        // allow overriding the default config
        $.extend(myFeature.config, settings);

        myFeature.setup();
    },

    setup : function() {
        myFeature.config.$items
            .each(myFeature.createContainer)
            .click(myFeature.showItem);
    },

    createContainer : function() {
        var $i = $(this),
            $c = myFeature.config.$container.clone()
                     .appendTo($i);

        $i.data('container', $c);
    },

    buildUrl : function() {
        return myFeature.config.urlBase +
               myFeature.$currentItem.attr('id');
    },

    showItem : function() {
        var myFeature.$currentItem = $(this);
        myFeature.getContent(myFeature.showContent);
    },

    getContent : function(callback) {
        var url = myFeature.buildUrl();
        myFeature.$currentItem
            .data('container').load(url, callback);
    },

    showContent : function() {
        myFeature.$currentItem
            .data('container').show();
        myFeature.hideContent();
    },

    hideContent : function() {
        myFeature.$currentItem.siblings()
            .each(function() {
                $(this).data('container').hide();
            });
    }
};

$(document).ready(myFeature.init);
</pre>
                </div>
              </div>
              <p>
                The first thing you'll notice is that this approach is obviously far longer than the original — again, if this were the extent of our application, using an object literal would likely be overkill. Assuming it's not the extent of our application, though, we've gained several things:
              </p>
              <ul>
                <li>
                  <p>
                    We've broken our feature up into tiny methods. In the future, if we want to change how content is shown, it's clear where to change it. In the original code, this step is much harder to locate.
                  </p>
                </li>
                <li>
                  <p>
                    We've eliminated the use of anonymous functions.
                  </p>
                </li>
                <li>
                  <p>
                    We've moved configuration options out of the body of the code and put them in a central location.
                  </p>
                </li>
                <li>
                  <p>
                    We've eliminated the constraints of the chain, making the code easier to refactor, remix, and rearrange.
                  </p>
                </li>
              </ul>
              <p>
                For non-trivial features, object literals are a clear improvement over a long stretch of code stuffed in a $(document).ready() block, as they get us thinking about the pieces of our functionality. However, they aren't a whole lot more advanced than simply having a bunch of function declarations inside of that $(document).ready() block.
              </p>
            </div>
            <div title="The Module Pattern" class="section">
              <div class="titlepage">
                <h3 class="title">
                  The Module Pattern
                </h3>
              </div>
              <p>
                The module pattern overcomes some of the limitations of the object literal, offering privacy for variables and functions while exposing a public API if desired.
              </p>
              <div class="example">
                <p class="title">
                  <b>The module pattern</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
var feature =(function() {

    // private variables and functions
    var privateThing = 'secret',
        publicThing = 'not secret',

        changePrivateThing = function() {
            privateThing = 'super secret';
        },

        sayPrivateThing = function() {
            console.log(privateThing);
            changePrivateThing();
        };

    // public API
    return {
        publicThing : publicThing,
        sayPrivateThing : sayPrivateThing
    }

})();

feature.publicThing; // 'not secret'

feature.sayPrivateThing();
// logs 'secret' and changes the value
// of privateThing
</pre>
                </div>
              </div>
              <p>
                In the example above, we self-execute an anonymous function that returns an object. Inside of the function, we define some variables. Because the variables are defined inside of the function, we don't have access to them outside of the function unless we put them in the return object. This means that no code outside of the function has access to the <code class="code">privateThing</code> variable or to the <code class="code">changePrivateThing</code> function. However, <code class="code">sayPrivateThing</code> does have access to <code class="code">privateThing</code> and <code class="code">changePrivateThing</code>, because both were defined in the same scope as <code class="code">sayPrivateThing</code>.
              </p>
              <p>
                This pattern is powerful because, as you can gather from the variable names, it can give you private variables and functions while exposing a limited API consisting of the returned object's properties and methods.
              </p>
              <p>
                Below is a revised version of the previous example, showing how we could create the same feature using the module pattern while only exposing one public method of the module, <code class="code">showItemByIndex()</code>.
              </p>
              <div class="example">
                <p class="title">
                  <b>Using the module pattern for a jQuery feature</b>
                </p>
                <div class="example-contents">
                  <pre class="programlisting">
$(document).ready(function() {
    var feature = (function() {

        var $items = $('#myFeature li'),
            $container = $('&lt;div class="container"&gt;&lt;/div&gt;'),
            $currentItem,

            urlBase = '/foo.php?item=',

            createContainer = function() {
                var $i = $(this),
                    $c = $container.clone().appendTo($i);

                $i.data('container', $c);
            },

            buildUrl = function() {
                return urlBase + $currentItem.attr('id');
            },

            showItem = function() {
                var $currentItem = $(this);
                getContent(showContent);
            },

            showItemByIndex = function(idx) {
                $.proxy(showItem, $items.get(idx));
            },

            getContent = function(callback) {
                $currentItem.data('container').load(buildUrl(), callback);
            },

            showContent = function() {
                $currentItem.data('container').show();
                hideContent();
            },

            hideContent = function() {
                $currentItem.siblings()
                    .each(function() {
                        $(this).data('container').hide();
                });
            };

        $items
            .each(createContainer)
            .click(showItem);

        return { showItemByIndex : showItemByIndex };
    })();

    feature.showItemByIndex(0);
});
</pre>
                </div>
              </div>
            </div>
          </div>
          <h2 class="title">
            Managing Dependencies
          </h2>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            This section is based heavily on the excellent RequireJS documentation at <a href="http://requirejs.org/docs/jquery.html" class="ulink">http://requirejs.org/docs/jquery.html</a>, and is used with the permission of RequireJS author James Burke.
          </p>
          </div>
          <p>
            When a project reaches a certain size, managing the script modules for a project starts to get tricky. You need to be sure to sequence the scripts in the right order, and you need to start seriously thinking about combining scripts together into a bundle for deployment, so that only one or a very small number of requests are made to load the scripts. You may also want to load code on the fly, after page load.
          </p>
          <p>
            RequireJS, a dependency management tool by James Burke, can help you manage the script modules, load them in the right order, and make it easy to combine the scripts later via the RequireJS optimization tool without needing to change your markup. It also gives you an easy way to load scripts after the page has loaded, allowing you to spread out the download size over time.
          </p>
          <p>
            RequireJS has a module system that lets you define well-scoped modules, but you do not have to follow that system to get the benefits of dependency management and build-time optimizations. Over time, if you start to create more modular code that needs to be reused in a few places, the module format for RequireJS makes it easy to write encapsulated code that can be loaded on the fly. It can grow with you, particularly if you want to incorporate internationalization (i18n) string bundles, to localize your project for different languages, or load some HTML strings and make sure those strings are available before executing code, or even use JSONP services as dependencies.
          </p>
          <div title="Getting RequireJS" class="section">
            <div class="titlepage">
              <h3 class="title">
                Getting RequireJS
              </h3>
            </div>
            <p>
              The easiest way to use RequireJS with jQuery is to <a href="http://requirejs.org/docs/download.html" class="ulink">download a build of jQuery that has RequireJS built in</a>. This build excludes portions of RequireJS that duplicate jQuery functionality. You may also find it useful to download <a href="http://requirejs.org/docs/release/0.11.0/jquery-require-sample.zip" class="ulink">a sample jQuery project that uses RequireJS</a>.
            </p>
          </div>
          <div title="Using RequireJS with jQuery" class="section">
            <div class="titlepage">
              <h3 class="title">
                Using RequireJS with jQuery
              </h3>
            </div>
            <p>
              Using RequireJS in your page is simple: just include the jQuery that has RequireJS built in, then require your application files. The following example assumes that the jQuery build, and your other scripts, are all in a <code class="filename">scripts/</code> directory.
            </p>
            <div class="example">
              <p class="title">
                <b>Using RequireJS: A simple example</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;jQuery+RequireJS Sample Page&lt;/title&gt;
        &lt;script src="scripts/require-jquery.js"&gt;&lt;/script&gt;
        &lt;script&gt;require(["app"]);&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;jQuery+RequireJS Sample Page&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
              </div>
            </div>
            <p>
              The call to <code class="code">require(["app"])</code> tells RequireJS to load the <code class="filename">scripts/app.js</code> file. RequireJS will load any dependency that is passed to <code class="code">require()</code> without a <code class="filename">.js</code> extension from the same directory as <code class="filename">require-jquery.js</code>, though this can be configured to behave differently. If you feel more comfortable specifying the whole path, you can also do the following:
            </p>
            <pre class="programlisting">
&lt;script&gt;require(["scripts/app.js"]);&lt;/script&gt;
</pre>
            <p>
              What is in <code class="filename">app.js</code>? Another call to <code class="filename">require.js</code> to load all the scripts you need and any init work you want to do for the page. This example <code class="filename">app.js</code> script loads two plugins, <code class="filename">jquery.alpha.js</code> and <code class="filename">jquery.beta.js</code> (not the names of real plugins, just an example). The plugins should be in the same directory as <code class="filename">require-jquery.js</code>:
            </p>
            <div class="example">
              <p class="title">
                <b>A simple JavaScript file with dependencies</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
require(["jquery.alpha", "jquery.beta"], function() {
    //the jquery.alpha.js and jquery.beta.js plugins have been loaded.
    $(function() {
        $('body').alpha().beta();
    });
});
</pre>
              </div>
            </div>
          </div>
          <div title="Creating Reusable Modules with RequireJS" class="section">
            <div class="titlepage">
              <h3 class="title">
                Creating Reusable Modules with RequireJS
              </h3>
            </div>
            <p>
              RequireJS makes it easy to define reusable modules via <code class="code">require.def()</code>. A RequireJS module can have dependencies that can be used to define a module, and a RequireJS module can return a value — an object, a function, whatever — that can then be consumed by yet other modules.
            </p>
            <p>
              If your module does not have any dependencies, then just specify the name of the module as the first argument to <code class="code">require.def()</code>. The second argument is just an object literal that defines the module's properties. For example:
            </p>
            <div class="example">
              <p class="title">
                <b>Defining a RequireJS module that has no dependencies</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
require.def("my/simpleshirt",
    {
        color: "black",
        size: "unisize"
    }
);
</pre>
                <p>
                  This example would be stored in a my/simpleshirt.js file.
                </p>
                <p>
                  If your module has dependencies, you can specify the dependencies as the second argument to <code class="code">require.def()</code> (as an array) and then pass a function as the third argument. The function will be called to define the module once all dependencies have loaded. The function receives the values returned by the dependencies as its arguments (in the same order they were required in the array), and the function should return an object that defines the module.
                </p>
                <div class="example">
                  <p class="title">
                    <b>Defining a RequireJS module with dependencies</b>
                  </p>
                  <div class="example-contents">
                    <pre class="programlisting">
require.def("my/shirt",
    ["my/cart", "my/inventory"],
    function(cart, inventory) {
        //return an object to define the "my/shirt" module.
        return {
            color: "blue",
            size: "large"
            addToCart: function() {
                inventory.decrement(this);
                cart.add(this);
            }
        }
    }
);
</pre>
                  </div>
                </div>
                <p>
                  In this example, a my/shirt module is created. It depends on my/cart and my/inventory. On disk, the files are structured like this:
                </p>
                <pre class="programlisting">
my/cart.js
my/inventory.js
my/shirt.js
</pre>
                <p>
                  The function that defines <code class="code">my/shirt</code> is not called until the <code class="code">my/cart</code> and <code class="code">my/inventory</code> modules have been loaded, and the function receives the modules as the <code class="code">cart</code> and <code class="code">inventory</code> arguments. The order of the function arguments must match the order in which the dependencies were required in the dependencies array. The object returned by the function call defines the <code class="code">my/shirt</code> module. Be defining modules in this way, <code class="code">my/shirt</code> does not exist as a global object. Modules that define globals are explicitly discouraged, so multiple versions of a module can exist in a page at a time.
                </p>
                <p>
                  Modules do not have to return objects; any valid return value from a function is allowed.
                </p>
                <div class="example">
                  <p class="title">
                    <b>Defining a RequireJS module that returns a function</b>
                  </p>
                  <div class="example-contents">
                    <pre class="programlisting">
require.def("my/title",
    ["my/dependency1", "my/dependency2"],
    function(dep1, dep2) {
        //return a function to define "my/title". It gets or sets
        //the window title.
        return function(title) {
            return title ? (window.title = title) : window.title;
        }
    }
);
</pre>
                  </div>
                </div>
                <p>
                  Only one module should be required per JavaScript file.
                </p>
              </div>
            </div>
          </div>
          <div title="Optimizing Your Code: The RequireJS Build Tool" class="section">
            <div class="titlepage">
              <h3 class="title">
                Optimizing Your Code: The RequireJS Build Tool
              </h3>
            </div>
            <p>
              Once you incorporate RequireJS for dependency management, your page is set up to be optimized very easily. Download the RequireJS source and place it anywhere you like, preferrably somewhere outside your web development area. For the purposes of this example, the RequireJS source is placed as a sibling to the <code class="filename">webapp</code> directory, which contains the HTML page and the scripts directory with all the scripts. Complete directory structure:
            </p>
            <pre class="programlisting">
requirejs/ (used for the build tools)
webapp/app.html
webapp/scripts/app.js
webapp/scripts/require-jquery.js
webapp/scripts/jquery.alpha.js
webapp/scripts/jquery.beta.js
</pre>
            <p>
              Then, in the scripts directory that has <code class="filename">require-jquery.js</code> and app.js, create a file called app.build.js with the following contents:
            </p>
            <div class="example">
              <p class="title">
                <b>A RequireJS build configuration file</b>
              </p>
              <div class="example-contents">
                <pre class="programlisting">
{
    appDir: "../",
    baseUrl: "scripts/",
    dir: "../../webapp-build",
    //Comment out the optimize line if you want
    //the code minified by Closure Compiler using
    //the "simple" optimizations mode
    optimize: "none",

    modules: [
        {
            name: "app"
        }
    ]
}
</pre>
              </div>
            </div>
            <p>
              To use the build tool, you need Java 6 installed. Closure Compiler is used for the JavaScript minification step (if <code class="code">optimize: "none"</code> is commented out), and it requires Java 6.
            </p>
            <p>
              To start the build, go to the webapp/scripts directory, execute the following command:
            </p>
            <pre class="programlisting">
# non-windows systems
../../requirejs/build/build.sh app.build.js

# windows systems
..\..\requirejs\build\build.bat app.build.js
</pre>
            <p>
              Now, in the webapp-build directory, <code class="filename">app.js</code> will have the <code class="filename">app.js</code> contents, <code class="filename">jquery.alpha.js</code> and <code class="filename">jquery.beta.js</code> inlined. If you then load the <code class="filename">app.html</code> file in the <code class="filename">webapp-build</code> directory, you should not see any network requests for <code class="filename">jquery.alpha.js</code> and <code class="filename">jquery.beta.js</code>.
            </p>
          </div>
          <div title="Exercises" class="section">
            <h2 class="title">
              Exercises
            </h2>
            <div title="Create a Portlet Module" class="section">
              <div class="titlepage">
                <h3 class="title">
                  Create a Portlet Module
                </h3>
              </div>
              <p>
                Open the file <code class="filename">/exercises/portlets.html</code> in your browser. Use the file <code class="filename">/exercises/js/portlets.js</code>. Your task is to create a portlet creation function that uses the module pattern, such that the following code will work:
              </p>
              <pre class="programlisting">
var myPortlet = Portlet({
    title : 'Curry',
    source : 'data/html/curry.html',
    initialState : 'open' // or 'closed'
});

myPortlet.$element.appendTo('body');
</pre>
              <p>
                Each portlet should be a div with a title, a content area, a button to open/close the portlet, a button to remove the portlet, and a button to refresh the portlet. The portlet returned by the Portlet function should have the following public API:
              </p>
              <pre class="programlisting">
myPortlet.open(); // force open state
myPortlet.close(); // force close state
myPortlet.toggle(); // toggle open/close state
myPortlet.refresh(); // refresh the content
myPortlet.destroy(); // remove the portlet from the page
myPortlet.setSource('data/html/onions.html');
// change the source
</pre>
            </div>
          </div>
        </div>
        <div title="Custom Events" class="chapter">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  Custom Events
                </h2>
              </div>
            </div>
          </div>
          <h2 class="title">
            Introducing Custom Events
          </h2>
          <p>
            We’re all familiar with the basic events — click, mouseover, focus, blur, submit, etc. — that we can latch on to as a user interacts with the browser. Custom events open up a whole new world of event-driven programming. In this chapter, we’ll use jQuery’s custom events system to make a simple Twitter search application.
          </p>
          <p>
            It can be difficult at first to understand why you'd want to use custom events, when the built-in events seem to suit your needs just fine. It turns out that custom events offer a whole new way of thinking about event-driven JavaScript. Instead of focusing on the element that triggers an action, custom events put the spotlight on the element being acted upon. This brings a bevy of benefits, including:
          </p>
          <ul>
            <li>
              <p>
                Behaviors of the target element can easily be triggered by different elements using the same code.
              </p>
            </li>
            <li>
              <p>
                Behaviors can be triggered across multiple, similar, target elements at once.
              </p>
            </li>
            <li>
              <p>
                Behaviors are more clearly associated with the target element in code, making code easier to read and maintain.
              </p>
            </li>
          </ul>
          <p>
            Why should you care? An example is probably the best way to explain. Suppose you have a lightbulb in a room in a house. The lightbulb is currently turned on, and it’s controlled by two three-way switches and a clapper:
          </p>
          <pre class="programlisting">
&lt;div class="room" id="kitchen"&gt;
    &lt;div class="lightbulb on"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="clapper"&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>
          <p>
            Triggering the clapper or either of the switches will change the state of the lightbulb. The switches and the clapper don’t care what state the lightbulb is in; they just want to change the state.
          </p>
          <p>
            Without custom events, you might write some code like this:
          </p>
          <pre class="programlisting">
$('.switch, .clapper').click(function() {
    var $light = $(this).parent().find('.lightbulb');
    if ($light.hasClass('on')) {
        $light.removeClass('on').addClass('off');
    } else {
        $light.removeClass('off').addClass('on');
    }
});
</pre>
          <p>
            With custom events, your code might look more like this:
          </p>
          <pre class="programlisting">
$('.lightbulb').bind('changeState', function(e) {
    var $light = $(this);
    if ($light.hasClass('on')) {
        $light.removeClass('on').addClass('off');
    } else {
        $light.removeClass('off').addClass('on');
    }
});

$('.switch, .clapper').click(function() {
    $(this).parent().find('.lightbulb').trigger('changeState');
});
</pre>
          <p>
            This last bit of code is not that exciting, but something important has happened: we’ve moved the behavior of the lightbulb to the lightbulb, and away from the switches and the clapper.
          </p>
          <p>
            Let’s make our example a little more interesting. We’ll add another room to our house, along with a master switch, as shown here:
          </p>
          <pre class="programlisting">
&lt;div class="room" id="kitchen"&gt;
    &lt;div class="lightbulb on"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="clapper"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="room" id="bedroom"&gt;
    &lt;div class="lightbulb on"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="switch"&gt;&lt;/div&gt;
    &lt;div class="clapper"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="master_switch"&gt;&lt;/div&gt;
</pre>
          <p>
            If there are any lights on in the house, we want the master switch to turn all the lights off; otherwise, we want it to turn all lights on. To accomplish this, we’ll add two more custom events to the lightbulbs: <code class="code">turnOn</code> and <code class="code">turnOff</code>. We’ll make use of them in the <code class="code">changeState</code> custom event, and use some logic to decide which one the master switch should trigger:
          </p>
          <pre class="programlisting">
$('.lightbulb')
    .bind('changeState', function(e) {
        var $light = $(this);
        if ($light.hasClass('on')) {
            $light.trigger('turnOff');
        } else {
            $light.trigger('turnOn');
        }
    })
    .bind('turnOn', function(e) {
        $(this).removeClass('off').addClass('on');
    })
    .bind('turnOff', function(e) {
        $(this).removeClass('off').addClass('on');
    });

$('.switch, .clapper').click(function() {
    $(this).parent().find('.lightbulb').trigger('changeState');
});

$('#master_switch').click(function() {
    if ($('.lightbulb.on').length) {
        $('.lightbulb').trigger('turnOff');
    } else {
        $('.lightbulb').trigger('turnOn');
    }
});
</pre>
          <p>
            Note how the behavior of the master switch is attached to the master switch; the behavior of a lightbulb belongs to the lightbulbs.
          </p>
          <div class="note">
          <h3 class="title">
            Note
          </h3>
          <p>
            If you’re accustomed to object-oriented programming, you may find it useful to think of custom events as methods of objects. Loosely speaking, the object to which the method belongs is created via the jQuery selector. Binding the changeState custom event to all <code class="code">$(‘.light’)</code> elements is akin to having a class called <code class="code">Light</code> with a method of <code class="code">changeState</code>, and then instantiating new <code class="code">Light</code> objects for each element with a classname of light.
          </p>
          </div>
          <div title="Recap: $.fn.bind and $.fn.trigger" class="sidebar">
            <p class="title">
              <b>Recap: $.fn.bind and $.fn.trigger</b>
            </p>
            <p>
              In the world of custom events, there are two important jQuery methods: <code class="code">$.fn.bind</code> and <code class="code">$.fn.trigger</code>. In the Events chapter, we saw how to use these methods for working with user events; for this chapter, it's important to remember two things:
            </p>
            <ul>
              <li>The <code class="code">$.fn.bind</code> method takes an event type and an event handling function as arguments. Optionally, it can also receive event-related data as its second argument, pushing the event handling function to the third argument. Any data that is passed will be available to the event handling function in the <code class="code">data</code> property of the event object. The event handling function always receives the event object as its first argument.
              </li>
              <li>The <code class="code">$.fn.trigger</code> method takes an event type as its argument. Optionally, it can also take an array of values. These values will be passed to the event handling function as arguments after the event object.
              </li>
            </ul>
            <p>
              Here is an example of the usage of <code class="code">$.fn.bind</code> and <code class="code">$.fn.trigger</code> that uses custom data in both cases:
            </p>
            <pre class="programlisting">
$(document).bind('myCustomEvent', { foo : 'bar' }, function(e, arg1, arg2) {
    console.log(e.data.foo); // 'bar'
    console.log(arg1); // 'bim'
    console.log(arg2); // 'baz'
});

$(document).trigger('myCustomEvent', [ 'bim', 'baz' ]);
</pre>
          </div>
          <div title="A Sample Application" class="section">
            <div class="titlepage">
              <h3 class="title">
                A Sample Application
              </h3>
            </div>
            <p>
              To demonstrate the power of custom events, we’re going to create a simple tool for searching Twitter. The tool will offer several ways for a user to add search terms to the display: by entering a search term in a text box, by entering multiple search terms in the URL, and by querying Twitter for trending terms.
            </p>
            <p>
              The results for each term will be shown in a results container; these containers will be able to be expanded, collapsed, refreshed, and removed, either individually or all at once.
            </p>
            <p>
              When we’re done, it will look like this:
            </p>
            <div class="figure">
              <p class="title">
                <b>Figure&nbsp;11.1.&nbsp;Our finished application</b>
              </p>
              <div class="figure-contents">
                <div class="screenshot">
                  <div class="mediaobject">
                    <img alt="Our finished application" src="http://gyazo.com/70415e9fffab1c47953f5264ecf722fe.png">
                  </div>
                </div>
              </div>
            </div><br class="figure-break">
            <div title="The Setup" class="section">
              <div class="titlepage">
                <h4 class="title">
                  The Setup
                </h4>
              </div>
              <p>
                We’ll start with some basic HTML:
              </p>
              <pre class="programlisting">
&lt;h1&gt;Twitter Search&lt;/h1&gt;
&lt;input type="button" id="get_trends"
    value="Load Trending Terms" /&gt;

&lt;form&gt;
    &lt;input type="text" class="input_text"
        id="search_term" /&gt;
    &lt;input type="submit" class="input_submit"
        value="Add Search Term" /&gt;
&lt;/form&gt;

&lt;div id="twitter"&gt;
    &lt;div class="template results"&gt;
        &lt;h2&gt;Search Results for
        &lt;span class="search_term"&gt;&lt;/span&gt;&lt;/h2&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre>
              <p>
                This gives us a container (#twitter) for our widget, a template for our results containers (hidden via CSS), and a simple form where users can input a search term. (For the sake of simplicity, we’re going to assume that our application is JavaScript-only and that our users will always have CSS.)
              </p>
              <p>
                There are two types of objects we’ll want to act on: the results containers, and the Twitter container.
              </p>
              <p>
                The results containers are the heart of the application. We’ll create a plugin that will prepare each results container once it’s added to the Twitter container. Among other things, it will bind the custom events for each container and add the action buttons at the top right of each container. Each results container will have the following custom events:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">refresh</span>
                  </dt>
                  <dd>
                    <p>
                      Mark the container as being in the “refreshing” state, and fire the request to fetch the data for the search term.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">populate</span>
                  </dt>
                  <dd>
                    <p>
                      Receive the returned JSON data and use it to populate the container.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">remove</span>
                  </dt>
                  <dd>
                    <p>
                      Remove the container from the page after the user verifies the request to do so. Verification can be bypassed by passing true as the second argument to the event handler. The remove event also removes the term associated with the results container from the global object containing the search terms.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">collapse</span>
                  </dt>
                  <dd>
                    <p>
                      Add a class of collapsed to the container, which will hide the results via CSS. It will also turn the container’s “Collapse” button into an “Expand” button.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">expand</span>
                  </dt>
                  <dd>
                    <p>
                      Remove the collapsed class from the container. It will also turn the container’s “Expand” button into a “Collapse” button.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                The plugin is also responsible for adding the action buttons to the container. It binds a click event to each action’s list item, and uses the list item’s class to determine which custom event will be triggered on the corresponding results container.
              </p>
              <pre class="programlisting">
$.fn.twitterResult = function(settings) {
    return this.each(function() {
        var $results = $(this),
            $actions = $.fn.twitterResult.actions =
                $.fn.twitterResult.actions ||
                $.fn.twitterResult.createActions(),
            $a = $actions.clone().prependTo($results),
            term = settings.term;

        $results.find('span.search_term').text(term);

        $.each(
            ['refresh', 'populate', 'remove', 'collapse', 'expand'],
            function(i, ev) {
                $results.bind(
                    ev,
                    { term : term },
                    $.fn.twitterResult.events[ev]
                );
            }
        );

        // use the class of each action to figure out
        // which event it will trigger on the results panel
        $a.find('li').click(function() {
            // pass the li that was clicked to the function
            // so it can be manipulated if needed
            $results.trigger($(this).attr('class'), [ $(this) ]);
        });
    });
};

$.fn.twitterResult.createActions = function() {
    return $('&lt;ul class="actions" /&gt;').append(
        '&lt;li class="refresh"&gt;Refresh&lt;/li&gt;' +
        '&lt;li class="remove"&gt;Remove&lt;/li&gt;' +
        '&lt;li class="collapse"&gt;Collapse&lt;/li&gt;'
    );
};

$.fn.twitterResult.events = {
    refresh : function(e) {
           // indicate that the results are refreshing
        var $this = $(this).addClass('refreshing');

        $this.find('p.tweet').remove();
        $results.append('&lt;p class="loading"&gt;Loading ...&lt;/p&gt;');

        // get the twitter data using jsonp
        $.getJSON(
            'http://search.twitter.com/search.json?q=' +
                escape(e.data.term) + '&amp;rpp=5&amp;callback=?',
            function(json) {
                $this.trigger('populate', [ json ]);
            }
        );
    },

    populate : function(e, json) {
        var results = json.results;
        var $this = $(this);

        $this.find('p.loading').remove();

        $.each(results, function(i,result) {
            var tweet = '&lt;p class="tweet"&gt;' +
                '&lt;a href="http://twitter.com/' +
                result.from_user +
                '"&gt;' +
                result.from_user +
                '&lt;/a&gt;: ' +
                result.text +
                ' &lt;span class="date"&gt;' +
                result.created_at +
                '&lt;/span&gt;' +
            '&lt;/p&gt;';
            $this.append(tweet);
        });

        // indicate that the results
        // are done refreshing
        $this.removeClass('refreshing');
    },

    remove : function(e, force) {
        if (
            !force &amp;&amp;
            !confirm('Remove panel for term ' + e.data.term + '?')
        ) {
            return;
        }
        $(this).remove();

        // indicate that we no longer
        // have a panel for the term
        search_terms[e.data.term] = 0;
    },

    collapse : function(e) {
        $(this).find('li.collapse').removeClass('collapse')
            .addClass('expand').text('Expand');

        $(this).addClass('collapsed');
    },

    expand : function(e) {
        $(this).find('li.expand').removeClass('expand')
            .addClass('collapse').text('Collapse');

        $(this).removeClass('collapsed');
    }
};
</pre>
              <p>
                The Twitter container itself will have just two custom events:
              </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">getResults</span>
                  </dt>
                  <dd>
                    <p>
                      Receives a search term and checks to determine whether there’s already a results container for the term; if not, adds a results container using the results template, set up the results container using the <code class="code">$.fn.twitterResult</code> plugin discussed above, and then triggers the <code class="code">refresh</code> event on the results container in order to actually load the results. Finally, it will store the search term so the application knows not to re-fetch the term.
                    </p>
                  </dd>
                  <dt>
                    <span class="term">getTrends</span>
                  </dt>
                  <dd>
                    <p>
                      Queries Twitter for the top 10 trending terms, then iterates over them and triggers the <code class="code">getResults</code> event for each of them, thereby adding a results container for each term.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Here's how the Twitter container bindings look:
              </p>
              <pre class="programlisting">
$('#twitter')
    .bind('getResults', function(e, term) {
        // make sure we don't have a box for this term already
        if (!search_terms[term]) {
            var $this = $(this);
            var $template = $this.find('div.template');

            // make a copy of the template div
            // and insert it as the first results box
            $results = $template.clone().
                removeClass('template').
                insertBefore($this.find('div:first')).
                twitterResult({
                    'term' : term
                });

            // load the content using the "refresh"
            // custom event that we bound to the results container
            $results.trigger('refresh');
            search_terms[term] = 1;
        }
    })
    .bind('getTrends', function(e) {
        var $this = $(this);
        $.getJSON('http://search.twitter.com/trends.json?callback=?', function(json) {
                var trends = json.trends;
                $.each(trends, function(i, trend) {
                    $this.trigger('getResults', [ trend.name ]);
                });
            });
    });
</pre>
              <p>
                So far, we’ve written a lot of code that does approximately nothing, but that’s OK. By specifying all the behaviors that we want our core objects to have, we’ve created a solid framework for rapidly building out the interface.
              </p>
              <p>
                Let’s start by hooking up our text input and the “Load Trending Terms” button. For the text input, we’ll capture the term that was entered in the input and pass it as we trigger the Twitter container’s <code class="code">getResults</code> event. Clicking the “Load Trending Terms” will trigger the Twitter container’s <code class="code">getTrends</code> event:
              </p>
              <pre class="programlisting">
$('form').submit(function(e) {
    e.preventDefault();
    var term = $('#search_term').val();
    $('#twitter').trigger('getResults', [ term ]);
});

$('#get_trends').click(function() {
    $('#twitter').trigger('getTrends');
});
</pre>
              <p>
                By adding a few buttons with the appropriate IDs, we can make it possible to remove, collapse, expand, and refresh all results containers at once, as shown below. For the remove button, note how we’re passing a value of true to the event handler as its second argument, telling the event handler that we don’t want to verify the removal of individual containers.
              </p>
              <pre class="programlisting">
$.each(['refresh', 'expand', 'collapse'], function(i, ev) {
    $('#' + ev).click(function(e) { $('#twitter div.results').trigger(ev); });
});

$('#remove').click(function(e) {
    if (confirm('Remove all results?')) {
        $('#twitter div.results').trigger('remove', [ true ]);
    }
});
</pre>
            </div>
            <div title="Conclusion" class="section">
              <div class="titlepage">
                <h4 class="title">
                  Conclusion
                </h4>
              </div>
              <p>
                Custom events offer a new way of thinking about your code: they put the emphasis on the target of a behavior, not on the element that triggers it. If you take the time at the outset to spell out the pieces of your application, as well as the behaviors those pieces need to exhibit, custom events can provide a powerful way for you to “talk” to those pieces, either one at a time or en masse. Once the behaviors of a piece have been described, it becomes trivial to trigger those behaviors from anywhere, allowing for rapid creation of and experimentation with interface options. Finally, custom events can enhance code readability and maintainability, by making clear the relationship between an element and its behaviors.
              </p>
              <p>
                You can see the full application at <code class="filename">demos/custom-events.html</code> and <code class="filename">demos/js/custom-events.js</code> in the sample code.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-143877-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(function() {

var toc = $('#toc ul'),
    loe = $('#loe ul');

function makeLi(text, href) {
  return $('<li><a href="' + href + '">' + text + '</a></li>');
}

$('div.chapter').each(function(i) {
  var chapter = $(this),
      chapterNumber = i;

  toc.append(
    makeLi('Chapter ' + chapterNumber + ': ' + chapter.attr('title'), '#chapter-' + i)
  );

  chapter.attr('id', 'chapter-' + i);

  chapter.find('div.example').each(function(j) {
    var example = $(this),
        title = example.find('p.title'),
        exampleNumber = chapterNumber + '.' + (j+1),
        exampleName = title.text();

    loe.append(
      makeLi('Example ' + exampleNumber + ': ' + exampleName, '#example-' + j)
    );

    example.attr('id', 'example-' + j);
    title.html('Example ' + exampleNumber + ': ' + exampleName);
  });

  chapter.prepend('<p class="toc"><a title="Back to top" href="#toc">Back to top</a></p>');
});

});
</script>

  </body>
</html>
